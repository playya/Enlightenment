AC_INIT(src/gevas.h)
AM_CONFIG_HEADER(demo/gevas-demo.h)
AM_INIT_AUTOMAKE(gevas, 0.1.0)

AM_PATH_GTK(1.2.0, ,
            AC_MSG_ERROR(Cannot find GTK: Is gtk-config in path?))


AC_C_BIGENDIAN
AC_PROG_CC
AM_PROG_CC_STDC
AM_WITH_DMALLOC
AC_C_CONST
AM_ENABLE_SHARED
AM_PROG_LIBTOOL
if test X"$enable_shared" = Xyes; then
  DLLDFLAGS=-export-dynamic
  AC_SUBST(DLLDFLAGS)
fi
AC_PROG_INSTALL
AC_PROG_MAKE_SET

dnl Set GEVAS_DATA_DIR in gevas-config.h.
if test "x${datadir}" = 'x${prefix}/share'; then
  if test "x${prefix}" = "xNONE"; then
    GEVAS_DATA_DIR="${ac_default_prefix}/share/${PACKAGE}"
  else
    GEVAS_DATA_DIR="${prefix}/share/${PACKAGE}"
  fi
else
  GEVAS_DATA_DIR="${datadir}/${PACKAGE}"
fi

GEVAS_DATA_DIR=\"`eval echo $GEVAS_DATA_DIR`\"
echo Data is being stored into GEVAS_DATA_DIR which is $GEVAS_DATA_DIR
AC_SUBST(GEVAS_DATA_DIR)
AC_DEFINE_UNQUOTED(PACKAGE_DATA_DIR, $GEVAS_DATA_DIR)


evas_cflags=`evas-config --cflags`
evas_libs=`evas-config --libs`
edb_cflags=`edb-config --cflags`
edb_libs=`edb-config --libs`
gtk_cflags=`gtk-config --cflags`


AC_SUBST(CFLAGS)
AC_SUBST(CPPFLAGS)
AC_SUBST(LDFLAGS)
AC_SUBST(evas_cflags)
AC_SUBST(evas_libs)
AC_SUBST(edb_cflags)
AC_SUBST(edb_libs)
AC_SUBST(gtk_cflags)

AC_OUTPUT([Makefile src/Makefile demo/Makefile src/gevas-config.h])
