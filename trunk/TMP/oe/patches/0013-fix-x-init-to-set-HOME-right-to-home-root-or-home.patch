From fb053be0cd6bb92866a5b955797baf5631635fe0 Mon Sep 17 00:00:00 2001
From: Carsten Haitzler <raster@openmoko.org>
Date: Sat, 18 Oct 2008 13:57:10 +1100
Subject: [PATCH] fix x init to set HOME right to /home/root or /home/USERNAME

---
 .../xserver-nodm-init/xserver-nodm                 |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/packages/xserver-kdrive-common/xserver-nodm-init/xserver-nodm b/packages/xserver-kdrive-common/xserver-nodm-init/xserver-nodm
index a56edaa..fd08ed9 100755
--- a/packages/xserver-kdrive-common/xserver-nodm-init/xserver-nodm
+++ b/packages/xserver-kdrive-common/xserver-nodm-init/xserver-nodm
@@ -24,7 +24,9 @@ case "$1" in
       $0 $1 background &
     else
        . /etc/profile
-
+       [ -z $LOGNAME ] && export LOGNAME=root && export HOME=/home/root
+       [ -z $HOME ] && export HOME=/home/$LOGNAME
+	      
        echo "Starting Xserver"
        /etc/X11/Xserver &
     fi 
-- 
1.5.4.3

