Summary: enlightened display manager
Name: @PACKAGE@
Version: @VERSION@
Release: 0.%(date '+%Y%m%d')
License: BSD
Group: System Environment/Libraries
URL: http://www.enlightenment.org/
Source: ftp://ftp.enlightenment.org/pub/entrance/%{name}-%{version}.tar.gz
Packager: %{?_packager:%{_packager}}%{!?_packager:Michael Jennings <mej@eterm.org>}
Vendor: %{?_vendorinfo:%{_vendorinfo}}%{!?_vendorinfo:The Enlightenment Project (http://www.enlightenment.org/)}
Distribution: %{?_distribution:%{_distribution}}%{!?_distribution:%{_vendor}}
#BuildSuggests: xorg-x11-xdm, XFree86-xdm
BuildRequires: libjpeg-devel, zlib-devel, /etc/X11/xdm/Xsession
BuildRequires: ecore-bin, ecore-devel, edje-devel, esmart-devel
BuildRoot: %{_tmppath}/%{name}-%{version}-root

%description
Entrance is the Enlightenment Display Manager. And like Enlightenment,
it takes beauty and customization to levels that KDM and GDM can only
dream about...and without the bloat.

%prep
%setup -q

%build
%{configure} --prefix=%{_prefix}
%{__make} %{?_smp_mflags} %{?mflags}

%install
%{__make} %{?mflags_install} DESTDIR=$RPM_BUILD_ROOT install
test -d ${HOME:-/tmp}/.ecore && %{__rm} -rf ${HOME:-/tmp}/.ecore || :
%{__mkdir_p} $RPM_BUILD_ROOT%{_var}/run/%{name}

%post
/sbin/ldconfig || :

%postun
/sbin/ldconfig || :

%clean
test "x$RPM_BUILD_ROOT" != "x/" && rm -rf $RPM_BUILD_ROOT

%files                                           
%defattr(-, root, root)                          
%doc AUTHORS COPYING* README
%{_sysconfdir}/entrance_config.cfg
%{_sysconfdir}/init.d/entrance
%{_sysconfdir}/pam.d/entrance
%{_bindir}/entrance*
%{_sbindir}/entrance*
%{_includedir}/*.h
%{_libdir}/libentrance*
%{_libexecdir}/entrance
%{_datadir}/%{name}
%{_var}/run/%{name}

%changelog
