#define IHaveSubdirs
SUBDIRS = TEST packages 

#include "../cf/ImlibPre.tmpl"

SRCS = load.c rend.c misc.c colors.c cache.c utils.c save.c
OBJS = load.o rend.o misc.o colors.o cache.o utils.o save.o

HDRS = Imlib.h Imlib_types.h
#define LibHeaders NO

INCLUDES = $(ALL_INCLUDES)
LOCAL_LDFLAGS= $(ALL_LOCAL_LDFLAGS)
DEFINES = -DLIB_BUILD $(ALL_DEFINES)

#ifndef DoNormalLib
#define DoNormalLib YES
#endif

#ifndef DoSharedLib
#define DoSharedLib NO
#endif

#ifndef DoDebugLib
#define DoDebugLib NO
#endif

#ifndef DoProfileLib
#define DoProfileLib NO
#endif

#ifndef DoLintLib
#define DoLintLib NO
#endif

#include <Library.tmpl>

#define SoRev IMLLIBREV

LibraryObjectRule()

#if DoNormalLib
NormalLibraryTarget($(IMLLIBNAME),$(OBJS))
InstallLibrary($(IMLLIBNAME),$(IMLLIBDIR))
#endif

#if DoDebugLib
DebuggedLibraryTarget($(IMLLIBNAME),$(OBJS))
InstallLibrary($(IMLLIBNAME)_d,$(IMLLIBDIR))
#endif

#if DoProfileLib
ProfiledLibraryTarget($(IMLLIBNAME),$(OBJS))
InstallLibrary($(IMLLIBNAME)_p,$(IMLLIBDIR))
#endif

#if DoLintLib
LintLibraryTarget($(IMLLIBNAME),$(SRCS))
InstallLintLibrary($(IMLLIBNAME),$(IMLLIBDIR))
#endif

#if DoSharedLib

#if (ProjectX == 5)
	SharedLibraryTarget($(IMLLIBNAME),$(IMLLIBREV),$(OBJS),shared,..)
	InstallSharedLibrary($(IMLLIBNAME),$(IMLLIBREV),$(IMLLIBDIR))
#elif (ProjectX > 5 )
	SharedLibraryTarget($(IMLLIBNAME),$(IMLLIBREV),$(OBJS),.,.)
	InstallSharedLibrary($(IMLLIBNAME),$(IMLLIBREV),$(IMLLIBDIR))
#endif

#endif

InstallMultiple($(HDRS),$(IMLINCDIR))

DependTarget()
LintTarget()

#include "../cf/ImlibPost.tmpl"
