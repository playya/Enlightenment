#define IHaveSubdirs
SUBDIRS = TEST packages 

#include "../cf/ImlibPre.tmpl"

SRCS = globals.c load.c rend.c misc.c colors.c cache.c utils.c save.c
OBJS = globals.o load.o rend.o misc.o colors.o cache.o utils.o save.o

HDRS = gdk_imlib.h gdk_imlib_types.h
#define LibHeaders NO

INCLUDES = $(ALL_INCLUDES)
LOCAL_LDFLAGS= $(ALL_LOCAL_LDFLAGS)
DEFINES = -DLIB_BUILD $(ALL_DEFINES)

#ifndef DoNormalLib
#define DoNormalLib YES
#endif

#ifndef DoSharedLib
#define DoSharedLib NO
#endif

#ifndef DoDebugLib
#define DoDebugLib NO
#endif

#ifndef DoProfileLib
#define DoProfileLib NO
#endif

#ifndef DoLintLib
#define DoLintLib NO
#endif

#include <Library.tmpl>

#define SoRev IMLLIBREV

LibraryObjectRule()

#if DoNormalLib
NormalLibraryTarget($(GDKIMLLIBNAME),$(OBJS))
InstallLibrary($(GDKIMLLIBNAME),$(IMLLIBDIR))
#endif

#if DoDebugLib
DebuggedLibraryTarget($(GDKIMLLIBNAME),$(OBJS))
InstallLibrary($(GDKIMLLIBNAME)_d,$(IMLLIBDIR))
#endif

#if DoProfileLib
ProfiledLibraryTarget($(GDKIMLLIBNAME),$(OBJS))
InstallLibrary($(GDKIMLLIBNAME)_p,$(IMLLIBDIR))
#endif

#if DoLintLib
LintLibraryTarget($(GDKIMLLIBNAME),$(SRCS))
InstallLintLibrary($(GDKIMLLIBNAME),$(IMLLIBDIR))
#endif

#if DoSharedLib

#if (ProjectX == 5)
	SharedLibraryTarget($(GDKIMLLIBNAME),$(IMLLIBREV),$(OBJS),shared,..)
	InstallSharedLibrary($(GDKIMLLIBNAME),$(IMLLIBREV),$(IMLLIBDIR))
#elif (ProjectX > 5 )
	SharedLibraryTarget($(GDKIMLLIBNAME),$(IMLLIBREV),$(OBJS),.,.)
	InstallSharedLibrary($(GDKIMLLIBNAME),$(IMLLIBREV),$(IMLLIBDIR))
#endif

#endif

InstallMultiple($(HDRS),$(IMLINCDIR))

DependTarget()
LintTarget()

#include "../cf/ImlibPost.tmpl"
