#!/usr/bin/make -f

include /usr/share/cdbs/1/class/autotools.mk
include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/rules/simple-patchsys.mk

DEB_HOST_GNU_SYSTEM=$(shell dpkg-architecture -qDEB_HOST_GNU_SYSTEM)
DEB_HOST_GNU_CPU=$(shell dpkg-architecture -qDEB_HOST_GNU_CPU)
ARCH_PATH=$(DEB_HOST_GNU_SYSTEM)-$(DEB_HOST_GNU_CPU)

install/ecomorph-e17-data::
	gzip -9 debian/tmp/usr/share/enlightenment/doc/*.txt
	rm debian/tmp/usr/share/enlightenment/COPYING

install/ecomorph-e17::
	sed "s/ARCH_PATH/$(ARCH_PATH)/" debian/ecomorph-e17.lintian-overrides.in > debian/ecomorph-e17.lintian-overrides

binary-predeb/ecomorph-e17::
	chmod 4755 debian/ecomorph-e17/usr/lib/enlightenment/utils/enlightenment_sys
	chmod 4755 debian/ecomorph-e17/usr/lib/enlightenment/modules/cpufreq/*/freqset

clean/ecomorph-e17::
	rm -f debian/ecomorph-e17.lintian-overrides

DEB_INSTALL_MANPAGES_ecomorph-e17 := $(DEB_SRCDIR)/debian/enlightenment.1 $(DEB_SRCDIR)/debian/enlightenment_*.1
DEB_DH_STRIP_ARGS := --dbg-package=ecomorph-e17-dbg
DEB_CONFIGURE_EXTRA_FLAGS := --disable-rpath
