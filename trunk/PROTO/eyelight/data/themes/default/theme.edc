#include "transition/transition.edc"

//theme's macro
#define tag_list() \
tag: "big" "+ font_size=35 ";\
tag: "small" "+ font_size=15 ";\
tag: "u" "+ style=underline underline_color=#00ff00ff underline2_color=#00ff00ff";\
tag: "b" "+ font=DejaVuSans_Bold ";\
tag: "i" "+ font=DejaVuSans_Oblique ";\
tag: "strike" "+ style=strikethrough strikethrough_color=#000000ff";\
tag: "outline" "+ style=soft_outline outline_color=#dea909 color=#d8e0e3";\
tag: "shadow" "+ style=soft_shadow shadow_color=#2c272799";\
tag: "outline_shadow" "+ style=outline_soft_shadow shadow_color=#2c272799 outline_color=#dea909  color=#c4d8e0";\
tag: "c" "+ align=middle";\
tag: "l" "+ align=left";\
tag: "r" "+ align=right";

#define slide_description(x1,y1)        \
description                             \
{                                       \
    state: "state_"x1"_"y1 0.0;         \
    visible: 1;                         \
    color: 255 255 255 255;             \
    rel1                                \
    {                                   \
        relative: x1 y1;                \
    }                                   \
    rel2                                \
    {                                   \
        relative: (x1+1.0) (y1+1.0);    \
    }                                   \
}


#define program_item_depth(part_name,depth_off_x) \
program                                                                 \
{                                                                       \
    name: part_name;                                                    \
    source: "eyelight";                                                 \
    signal: "increase,depth";                                           \
    script                                                              \
    {                                                                   \
        new off_x,off_y;                                                \
        custom_state(PART:part_name, "default", 0.0);                   \
        get_state_val(PART:part_name, STATE_REL2_OFFSET, off_x, off_y); \
                                                                        \
        off_x = off_x + depth_off_x;                                    \
        set_state_val(PART:part_name, STATE_REL2_OFFSET, off_x, off_y); \
                                                                        \
        set_state(PART:part_name, "custom", 0.0);                       \
    }                                                                   \
}


#define add_border(relative_part,border_size)   \
part                                                \
{                                                   \
    name: relative_part"_border_left";              \
    type: RECT;                                     \
                                     \
    description                                     \
    {                                               \
        state: "default" 0.0;                       \
        visible: 0;                                 \
        color: 0 0 0 255;                           \
        rel1                                        \
        {                                           \
            relative: 0.0 0.0;                      \
            to: relative_part;                      \
            offset: -border_size -border_size;      \
        }                                           \
        rel2                                        \
        {                                           \
            relative: 0.0 1.0;                      \
            offset: -1 (border_size-1);             \
            to: relative_part;                      \
        }                                           \
    }                                               \
    description                                     \
    {                                               \
        state: "visible" 0.0;                       \
        inherit: "default" 0.0;                     \
        visible: 1;                                 \
    }                                               \
}                                                   \
part                                                \
{                                                   \
    name: relative_part"_border_right";             \
    type: RECT;                                     \
                                     \
    description                                     \
    {                                               \
        state: "default" 0.0;                       \
        visible: 0;                                 \
        color: 0 0 0 255;                           \
        rel1                                        \
        {                                           \
            relative: 1.0 0.0;                      \
            to: relative_part;                      \
            offset: 0 -border_size;                 \
        }                                           \
        rel2                                        \
        {                                           \
            relative: 1.0 1.0;                      \
            offset: (border_size-1) (border_size-1);\
            to: relative_part;                      \
        }                                           \
    }                                               \
    description                                     \
    {                                               \
        state: "visible" 0.0;                       \
        inherit: "default" 0.0;                     \
        visible: 1;                                 \
    }                                               \
}                                                   \
part                                                \
{                                                   \
    name: relative_part"_border_top";               \
    type: RECT;                                     \
                                     \
    description                                     \
    {                                               \
        state: "default" 0.0;                       \
        visible: 0;                                 \
        color: 0 0 0 255;                           \
        rel1                                        \
        {                                           \
            relative: 0.0 0.0;                      \
            to: relative_part;                      \
            offset: -border_size -border_size;      \
        }                                           \
        rel2                                        \
        {                                           \
            relative: 1.0 0.0;                      \
            offset: (border_size-1) -1;             \
            to: relative_part;                      \
        }                                           \
    }                                               \
    description                                     \
    {                                               \
        state: "visible" 0.0;                       \
        inherit: "default" 0.0;                     \
        visible: 1;                                 \
    }                                               \
}                                                   \
part                                                \
{                                                   \
    name: relative_part"_border_bottom";            \
    type: RECT;                                     \
                                     \
    description                                     \
    {                                               \
        state: "default" 0.0;                       \
        visible: 0;                                 \
        color: 0 0 0 255;                           \
        rel1                                        \
        {                                           \
            relative: 0.0 1.0;                      \
            to: relative_part;                      \
            offset: -border_size 0;                 \
        }                                           \
        rel2                                        \
        {                                           \
            relative: 1.0 1.0;                      \
            offset: (border_size-1) (border_size-1);  \
            to: relative_part;                      \
        }                                           \
    }                                               \
    description                                     \
    {                                               \
        state: "visible" 0.0;                       \
        inherit: "default" 0.0;                     \
        visible: 1;                                 \
    }                                               \
}




fonts
{
    font:"fonts/DejaVuSans-Bold.ttf" "DejaVuSans_Bold";
    font:"fonts/DejaVuSans.ttf" "DejaVuSans";
    font:"fonts/DejaVuSans-Oblique.ttf" "DejaVuSans_Oblique";
}

images
{
    image: "item_00.png" COMP;
    image: "item_01.png" COMP;
    image: "item_02.png" COMP;
    image: "item_03.png" COMP;
    image: "expose_shadow.png" COMP;
    image: "expose_selection.png" COMP;
    image: "tableofcontents_selection.png" COMP;
    image: "expose_previous.png" COMP;
    image: "expose_next.png" COMP;
    image: "black.png" COMP;
    image: "background_top.png" COMP;
    image: "background.png" COMP;
    image: "background_bottom.png" COMP;
    image: "title_background.png" COMP;
    image: "subtitle_background.png" COMP;
    image: "play.png" COMP;
    image: "play_glow.png" COMP;
    image: "play_select.png" COMP;
    image: "pause.png" COMP;
    image: "pause_glow.png" COMP;
    image: "pause_select.png" COMP;
    image: "stop.png" COMP;
    image: "stop_glow.png" COMP;
    image: "stop_select.png" COMP;
    image: "slider_back.png" COMP;
    image: "slider_back_select.png" COMP;
    image: "slider.png" COMP;
    image: "slider_glow.png" COMP;
    image: "slider_select.png" COMP;
}

styles
{
    style
    {
        name: "itemStyle";
        base: "font=DejaVuSans font_size=22 align=0.0 valign=center color=#000000  wrap=word style=glow glow_color=#ffffff ";
        tag_list();
    }
    style
    {
        name: "numberingStyle";
        base: "font=DejaVuSans font_size=22 align=0.0 valign=0 color=#000000  wrap=word style=glow glow_color=#ffffff style=soft_outline outline_color=#7fa3ed color=#d8e0e3";
    }
    style
    {
        name: "titleStyle";
        base: "font=DejaVuSans_Oblique font_size=40 align=center valign=0.0 wrap=word style=glow glow_color=#ffc516 color=#ffffff";
        tag_list();
    }
    style
    {
        name: "subtitleStyle";
        base: "font=DejaVuSans font_size=20 align=center valign=bottom color=#ffffff  wrap=word style=soft_outline outline_color=#a1c2e8";
        tag_list();
    }
    style
    {
        name: "footStyle";
        base: "+ font=DejaVuSans font_size=18 aligncenter valign=bottom color=#ffffff  wrap=word ";
        tag_list();
    }
    style
    {
        name: "nbPagesStyle";
        base: "+ font=DejaVuSans font_size=18 align=right valign=bottom color=#ffffff  wrap=word ";
        tag_list();
    }
}


//first function called in a slide
#define pre_fct()                                       \
part                                \
{                                   \
    name: "slide";                  \
    type: RECT;                     \
                    \
    description                     \
    {                               \
        state: "default" 0.0;       \
        visible: 1;                 \
        rel1                        \
        {                           \
            relative: 1.0 1.0;      \
        }                           \
        rel2                        \
        {                           \
            relative: 2.0 2.0;      \
        }                           \
    }                               \
    description                             \
    {                                       \
        state: "not_visible" 0.0;           \
        visible: 1;                         \
        color: 255 255 255 0;               \
        rel1                                \
        {                                   \
            relative: 0 0;                  \
        }                                   \
        rel2                                \
        {                                   \
            relative: 1.0 1.0;              \
        }                                   \
    }                                       \
    slide_description(0.0,0.0);     \
    slide_description(-1.0,0.0);    \
    slide_description(0.0,1.0);     \
    slide_description(1.0,0.0);     \
    slide_description(0.0,-1.0);    \
}                                   \
part                                            \
{                                               \
        name: "background";                     \
        type: IMAGE;                            \
                                \
        description                             \
        {                                       \
                state: "default" 0.0;           \
                visible: 1;                     \
                color: 255 255 255 255;         \
                rel1                            \
                {                               \
                        relative: 0.0 0.0;      \
                        to: "slide";            \
                }                               \
                rel2                            \
                {                               \
                        relative: 1.0 1.0;      \
                        to: "slide";            \
                }                               \
                image                           \
                {                               \
                        normal: "background.png";\
                }                               \
        }                           \
}                                   \
part                                    \
{                                       \
        name: "background_top_color";   \
        type: RECT;                     \
                        \
        description                     \
        {                               \
                state: "default" 0.0;   \
                visible: 1;             \
                color: 0 0 0 255;       \
                rel1.to: "slide";       \
                rel2.to: "background_top"; \
                rel2.relative: 1.0 0.0; \
        }                               \
}                                       \
part                                \
{                                   \
    name: "background_top";         \
    type: IMAGE;                    \
                     \
    description                     \
    {                               \
        state: "default" 0.0;       \
        visible:1;                  \
        color: 255 255 255 255;     \
        rel1                        \
        {                           \
            relative: 0.0 0.0;      \
            offset: -2 0;           \
            to: "slide";            \
        }                           \
        rel2                        \
        {                           \
            relative: 1.0 0.27;     \
            to: "slide";            \
        }                           \
        image                       \
        {                           \
            scale_hint: STATIC;     \
            normal: "background_top.png";\
        }                           \
    }                               \
    description                     \
    {                               \
        state: "big" 0.0;           \
        inherit: "default" 0.0;     \
        rel1.relative: 0.0 0.2;     \
        rel2.relative: 1.0 0.2+0.27;\
    }                               \
}                                   \
part                                    \
{                                       \
        name: "background_bottom_color";\
        type: RECT;                     \
                        \
        description                     \
        {                               \
                state: "default" 0.0;   \
                visible: 1;             \
                color: 0 0 0 255;       \
                rel2.to: "slide";       \
                rel1.to: "background_bottom"; \
                rel1.relative: 0.0 1.0; \
        }                               \
}                                       \
part                                \
{                                   \
    name: "background_bottom";      \
    type: IMAGE;                    \
                     \
    description                     \
    {                               \
        state: "default" 0.0;       \
        visible:1;                  \
        color: 255 255 255 255;     \
        rel1                        \
        {                           \
            relative: 0.0 0.75;     \
            to: "slide";            \
            offset: -2 0;           \
        }                           \
        rel2                        \
        {                           \
            relative: 1.0 1.0;      \
            to: "slide";            \
        }                           \
        image                       \
        {                           \
            scale_hint: STATIC;     \
            normal: "background_bottom.png";\
        }                           \
    }                               \
    description                     \
    {                               \
        state: "big" 0.0;           \
        inherit: "default" 0.0;     \
        rel1.relative: 0.0 0.5;    \
        rel2.relative: 1.0 0.5+0.25;\
    }                               \
}                                   \

//last function called in a slide
#define post_fct()              \
part                            \
{                               \
    name: "fade";               \
    type: RECT;                 \
                \
    clip_to: "slide";           \
    repeat_events: 1;           \
    description                 \
    {                           \
        state: "default" 0.0;   \
        color: 0 0 0 0;         \
        rel1                    \
        {                       \
            relative: 0.0 0.0;  \
            to: "slide";        \
        }                       \
        rel2                    \
        {                       \
            relative: 1.0 1.0;  \
            to: "slide";        \
        }                       \
    }                           \
    description                 \
    {                           \
        state: "visible" 0.0;   \
        color: 0 0 0 255;       \
        rel1                    \
        {                       \
            relative: 0.0 0.0;  \
            to: "slide";        \
        }                       \
        rel2                    \
        {                       \
            relative: 1.0 1.0;  \
            to: "slide";        \
        }                       \
    }                           \
}


collections
{


    group
    {
        name: "eyelight/item_text";
        parts
        {
            part
            {
                name : "object.text";
                type: TEXTBLOCK;

                scale: 1;
                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 0.0 0.0;
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                    text
                    {
                        text: "TEXT";
                        style: "itemStyle";
                    }
                }
            }
        }
    }
    group
    {
        name: "eyelight/item_simple_text";
        parts
        {
            part
            {
                name: "depth";
                type: RECT;
                description
                {
                    state: "default" 0.0;
                    rel1.relative: 0.0 0.0;
                    rel2.relative: 0.0 0.0;
                }
            }
            part
            {
                name: "image";
                type: IMAGE;
                scale: 1;
                description
                {
                    state: "default" 0.0;
                    min: 24 24;
                    max: 24 24;
                    rel1.relative: 1.0 0.0;
                    rel1.to_x: "depth";
                    rel1.offset: 0 7;
                    align: 0 0;
                    image.normal: "item_00.png";
                }
            }
            part
            {
                name : "object.text";
                type: TEXTBLOCK;

                scale: 1;
                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 1.0 0.0;
                        to_x: "image";
                        offset: 2 0;
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                    text
                    {
                        text: "TEXT";
                        style: "itemStyle";
                    }
                }
            }
        }
        programs
        {
            program_item_depth("depth",50);
        }
    }
    group
    {
        name: "eyelight/item_numbering_text";
        parts
        {
            part
            {
                name: "depth";
                type: RECT;
                description
                {
                    state: "default" 0.0;
                    rel1.relative: 0.0 0.0;
                    rel2.relative: 0.0 0.0;
                }
            }
            part
            {
                name : "object.numbering";
                type: TEXTBLOCK;

                scale: 1;
                description
                {
                    state: "default" 0.0;
                    align: 0 0;
                    rel1
                    {
                        relative: 1.0 0.0;
                        to_x: "depth";
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                    text
                    {
                        text: "TEXT NUMBER";
                        style: "numberingStyle";
                        max: 1 0;
                    }
                }
            }
            part
            {
                name : "object.text";
                type: TEXTBLOCK;

                scale: 1;
                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 1.0 0.0;
                        to_x: "object.numbering";
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                    text
                    {
                        text: "TEXT";
                        style: "itemStyle";
                        max: 0 0;
                    }
                }
            }
        }
        programs
        {
            program_item_depth("depth",50);
        }
    }
    group
    {
        name: "eyelight/item_image";
        parts
        {
            part {
                name :"shadow";
                type: IMAGE;
                description {
                    state: "default" 0.0;
                    visible: 0;
                    image.normal: "expose_shadow.png";
                    image.border: 10 10 10 10;
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                }
            }
            part
            {
                name : "object.image";
                type: IMAGE;

                description
                {
                    state: "default" 0.0;
                    aspect: 0 0;
                    rel1.relative: 0.0 0.0;
                    rel2.relative: 1.0 1.0;
                    rel2.offset: -12 -12;
                    rel1.offset: 1 1;
                }
            }
            add_border("object.image",1);
            program {
                name :"display_border";
                signal: "border,show";
                source: "eyelight";
                action: STATE_SET "visible" 0.0;
                target: "object.image_border_left";
                target: "object.image_border_right";
                target: "object.image_border_top";
                target: "object.image_border_bottom";
            }
            program {
                name: "display_shadow";
                signal: "shadow,show";
                source: "eyelight";
                action: STATE_SET "visible" 0.0;
                target: "shadow";
            }
        }
    }
    group
    {
        name: "eyelight/item_edje";
        parts
        {
            part
            {
                name : "object.swallow";
                type: SWALLOW;

                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 0.0 0.0;
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                }
            }
        }
    }
    group {
        name: "eyelight/item_video";
        script {
            public controls;
        }
        parts {
            part {
                name :"shadow";
                type: IMAGE;
                description {
                    state: "default" 0.0;
                    visible: 0;
                    image.normal: "expose_shadow.png";
                    image.border: 10 10 10 10;
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                }
            }
            part {
                name : "object.swallow";
                type: SWALLOW;
                description {
                    state: "default" 0.0;
                    rel1.to: "main";
                    rel2.to: "main";
                }
            }
            part {
                name: "main";
                type: RECT;
                description {
                    state: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                    rel1.to: "shadow";
                    rel2.to: "shadow";
                    rel2.offset: -12 -12;
                    rel1.offset: 1 1;
                }
            }
            add_border("main",1);
            part {
                name: "controls";
                type: RECT;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.relative: 0.0 1.0;
                    rel2.relative: 1.0 1.2;
                    color: 255 255 255 0;
                    visible: 0;
                    rel1.to: "main";
                    rel2.to: "main";
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 0 0 0 255;
                    rel1.relative: 0.0 0.8;
                    rel2.relative: 1.0 1.0;
                }
            }
            part {
                name: "controls_background";
                type: IMAGE;
                clip_to: "controls";
                description {
                    state: "default" 0.0;
                    rel1.to: "controls";
                    rel2.to: "controls";
                    color: 255 255 255 230;
                    image.normal: "background_bottom.png";
                }
            }
            part {
                name: "state";
                type: TEXT;
                scale: 1;
                clip_to: "main";
                effect: SOFT_OUTLINE;
                description {
                    state: "default" 0.0;
                    rel1.relative: 0.01 0.7;
                    rel2.relative: 0.1 0.95;
                    rel1.to: controls;
                    rel2.to: controls;
                    color: 0 0 0 255;
                    align: 0.0 0.5;
                    color2: 255 255 255 255;
                    text {
                        text: "";
                        font: "DejaVuSans";
                        align: 0.0 0.5;
                        size: 12;
                        fit: 1 1;
                    }
                }
                description {
                    state: "play" 0.0;
                    inherit: "default" 0.0;
                    text {
                        text: "Play";
                    }
                }
                description {
                    state: "stop" 0.0;
                    inherit: "default" 0.0;
                    text {
                        text: "Stop";
                    }
                }
                description {
                    state: "pause" 0.0;
                    inherit: "default" 0.0;
                    text {
                        text: "Pause";
                    }
                }
            }
            part {
                name : "capture";
                type: RECT;
                repeat_events: 1;
                description {
                    state: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 0;
                }
            }
            part {
                name: "play_glow";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: "play";
                    rel2.to: "play";
                    color: 255 255 255 0;
                    visible: 0;
                    image.normal: "play_glow.png";
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                }
            }
            part {
                name: "play";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: controls;
                    rel2.to: controls;
                    color: 255 255 255 255;
                    rel1.relative: 0.07 0.6;
                    rel2.relative: 0.12 1.0;
                    image.normal: "play.png";
                }
            }
            part {
                name: "play_select";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: "play";
                    rel2.to: "play";
                    color: 255 255 255 0;
                    visible: 0;
                    image.normal: "play_select.png";
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                }
            }
            part {
                name: "pause_glow";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: "pause";
                    rel2.to: "pause";
                    color: 255 255 255 0;
                    visible: 0;
                    image.normal: "pause_glow.png";
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                }
            }
            part {
                name: "pause";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: controls;
                    rel2.to: controls;
                    color: 255 255 255 255;
                    rel1.relative: 0.12 0.6;
                    rel2.relative: 0.17 1.0;
                    image.normal: "pause.png";
                }
            }
            part {
                name: "pause_select";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: "pause";
                    rel2.to: "pause";
                    color: 255 255 255 0;
                    visible: 0;
                    image.normal: "pause_select.png";
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                }
            }
            part {
                name: "stop_glow";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: "stop";
                    rel2.to: "stop";
                    color: 255 255 255 0;
                    visible: 0;
                    image.normal: "stop_glow.png";
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                }
            }
            part {
                name: "stop";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: controls;
                    rel2.to: controls;
                    color: 255 255 255 255;
                    rel1.relative: 0.17 0.6;
                    rel2.relative: 0.22 1.0;
                    image.normal: "stop.png";
                }
            }
            part {
                name: "stop_select";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: "stop";
                    rel2.to: "stop";
                    color: 255 255 255 0;
                    visible: 0;
                    image.normal: "stop_select.png";
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                }
            }

            part {
                name: "slider_back";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: controls;
                    rel2.to: controls;
                    color: 255 255 255 255;
                    rel1.relative: 0.2 0.75;
                    rel2.relative: 0.8 0.95;
                    image.normal: "slider_back.png";
                    image.border: 2 5 5 2;
                }
            }
            part {
                name: "slider_back_select";
                type: IMAGE;
                clip_to: "main";
                description {
                    state: "default" 0.0;
                    rel1.to: "slider_back";
                    rel2.to: "slider_back";
                    color: 255 255 255 0;
                    visible: 0;
                    image.normal: "slider_back_select.png";
                    image.border: 2 5 5 2;
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                }
            }
            part {
                name: "confine";
                type: RECT;
                repeat_events: 1;
                clip_to:"main";
                description {
                    state: "default" 0.0;
                    visible: 0;
                    color: 255 255 255 0;
                    rel1.to: "slider_back";
                    rel2.to: "slider_back";
                    rel1.relative: 0.08 0.8;
                    rel2.relative: 0.9 1.3;
                }
            }
            part {
                name: "object.slider";
                type: RECT;
                clip_to:"main";
                scale:1;
                dragable {
                    confine: "confine";
                    x: 1 1 0;
                    y: 0 0 0;
                }
                description {
                    state: "default" 0.0;
                    min: 34 28;
                    max: 34 28;
                    visible: 1;
                    color: 255 255 255 0;
                }
            }
            part {
                name: "slider_glow";
                type: IMAGE;
                clip_to: "main";
                repeat_events: 1;
                description {
                    state: "default" 0.0;
                    rel1.to: "slider";
                    rel2.to: "slider";
                    color: 255 255 255 0;
                    visible: 0;
                    image.normal: "slider_glow.png";
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                }
            }
            part {
                name: "slider";
                type: IMAGE;
                clip_to: "main";
                repeat_events: 1;
                description {
                    state: "default" 0.0;
                    rel1.to: "object.slider";
                    rel2.to: "object.slider";
                    color: 255 255 255 255;
                    image.normal: "slider.png";
                }
            }
            part {
                name: "slider_select";
                type: IMAGE;
                clip_to: "main";
                repeat_events: 1;
                description {
                    state: "default" 0.0;
                    rel1.to: "slider";
                    rel2.to: "slider";
                    color: 255 255 255 0;
                    visible: 0;
                    image.normal: "slider_select.png";
                }
                description {
                    state: "visible" 0.0;
                    inherit: "default" 0.0;
                    visible: 1;
                    color: 255 255 255 255;
                }
            }
        }
        programs {
            program {
                name: "show";
                signal: "show";
                after: "controls_hide";
            }
            program {
                name: "display_shadow";
                signal: "shadow,show";
                source: "eyelight";
                action: STATE_SET "visible" 0.0;
                target: "shadow";
            }

            program {
                name: "display_border";
                signal: "border,show";
                source: "eyelight";
                action: STATE_SET "visible" 0.0;
                target: "main_border_left";
                target: "main_border_right";
                target: "main_border_top";
                target: "main_border_bottom";
            }
            program {
                name: "controls_show";
                signal: "mouse,up,1";
                source: "capture";
                script {
                    if( get_int(controls) == 0 ) {
                        run_program(PROGRAM:"show_controls");
                    }
                }
            }
            program {
                name: "show_controls";
                action: STATE_SET "visible" 0.0;
                target: "controls";
                transition: DECELERATE 0.5;
                after: "show_controls_2";
            }

            program {
                name: "show_controls_2";
                script {
                    set_int(controls, 1);
                }
            }

            program {
                name: "controls_hide";
                signal: "mouse,up,1";
                source: "capture";
                script {
                    if( get_int(controls) == 1)  {
                        run_program(PROGRAM:"hide_controls");
                    }
                }
            }
            program {
                name: "hide_controls";
                action: STATE_SET "default" 0.0;
                target: "controls";
                transition: ACCELERATE 0.7;
                after: "hide_controls_2";
            }
            program {
                name: "hide_controls_2";
                script {
                    set_int(controls, 0);
                }
            }

            //button play
            program {
                name: "play_in";
                signal: "mouse,in";
                source: "play";
                action: STATE_SET "visible" 0.0;
                target: "play_glow";
                transition: DECELERATE 0.2;
            }
            program {
                name: "play_out";
                signal: "mouse,out";
                source: "play";
                action: STATE_SET "default" 0.0;
                target: "play_glow";
                target: "play_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "play_down";
                signal: "mouse,down,1";
                source: "play";
                action: STATE_SET "visible" 0.0;
                target: "play_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "play_up";
                signal: "mouse,up,1";
                source: "play";
                after: "play_signal";
                after: "play_up_1";
            }
            program {
                name: "play_up_1";
                action: STATE_SET "default" 0.0;
                target: "play_select";
                transition: DECELERATE 0.2;
            }

            program {
                name: "play_signal";
                action: SIGNAL_EMIT "play" "video_control";
            }

            //button pause
            program {
                name: "pause_in";
                signal: "mouse,in";
                source: "pause";
                action: STATE_SET "visible" 0.0;
                target: "pause_glow";
                transition: DECELERATE 0.2;
            }
            program {
                name: "pause_out";
                signal: "mouse,out";
                source: "pause";
                action: STATE_SET "default" 0.0;
                target: "pause_glow";
                target: "pause_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "pause_down";
                signal: "mouse,down,1";
                source: "pause";
                action: STATE_SET "visible" 0.0;
                target: "pause_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "pause_up";
                signal: "mouse,up,1";
                source: "pause";
                after: "pause_signal";
                after: "pause_up_1";
            }
            program {
                name: "pause_up_1";
                action: STATE_SET "default" 0.0;
                target: "pause_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "pause_signal";
                action: SIGNAL_EMIT "pause" "video_control";
            }


            //button stop
            program {
                name: "stop_in";
                signal: "mouse,in";
                source: "stop";
                action: STATE_SET "visible" 0.0;
                target: "stop_glow";
                transition: DECELERATE 0.2;
            }
            program {
                name: "stop_out";
                signal: "mouse,out";
                source: "stop";
                action: STATE_SET "default" 0.0;
                target: "stop_glow";
                target: "stop_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "stop_down";
                signal: "mouse,down,1";
                source: "stop";
                action: STATE_SET "visible" 0.0;
                target: "stop_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "stop_up";
                signal: "mouse,up,1";
                source: "stop";
                after: "stop_signal";
                after: "stop_up_1";
            }
            program {
                name: "stop_up_1";
                action: STATE_SET "default" 0.0;
                target: "stop_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "stop_signal";
                action: SIGNAL_EMIT "stop" "video_control";
            }

            //slider
            program {
                name: "slider_in";
                signal: "mouse,in";
                source: "object.slider";
                action: STATE_SET "visible" 0.0;
                target: "slider_glow";
                transition: DECELERATE 0.2;
            }
            program {
                name: "slider_out";
                signal: "mouse,out";
                source: "object.slider";
                action: STATE_SET "default" 0.0;
                target: "slider_glow";
                target: "slider_select";
                target: "slider_back";
                transition: DECELERATE 0.2;
            }
            program {
                name: "slider_down";
                signal: "mouse,down,1";
                source: "object.slider";
                action: STATE_SET "visible" 0.0;
                target: "slider_select";
                target: "slider_back_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "slider_up";
                signal: "mouse,up,1";
                source: "object.slider";
                after: "slider_signal";
                after: "slider_up_1";
            }
            program {
                name: "slider_up_1";
                action: STATE_SET "default" 0.0;
                target: "slider_select";
                target: "slider_back_select";
                transition: DECELERATE 0.2;
            }
            program {
                name: "slider_signal";
                action: SIGNAL_EMIT "move" "video_control";
            }


            //state
            program {
                name: "state_play";
                signal: "play";
                source: "video_state";
                action: STATE_SET "play" 0.0;
                target: "state";
            }
            program {
                name: "state_pause";
                signal: "pause";
                source: "video_state";
                action: STATE_SET "pause" 0.0;
                target: "state";
            }
            program {
                name: "state_stop";
                signal: "stop";
                source: "video_state";
                action: STATE_SET "stop" 0.0;
                target: "state";
            }
        }
    }
    group
    {
        name: "eyelight/header_image";
        parts
        {
            part
            {
                name : "object.header_image";
                type: IMAGE;

                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 0.0 0.0;
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                }
            }
        }
    }
    group
    {
        name: "eyelight/foot_image";
        parts
        {
            part
            {
                name : "object.foot_image";
                type: IMAGE;

                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 0.0 0.0;
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                }
            }
        }
    }
    group
    {
        name: "eyelight/foot_text";
        parts
        {
            part
            {
                name : "object.foot_text";
                type: TEXTBLOCK;

                scale: 1;
                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 0.0 0.0;
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                    text
                    {
                        text: "TITLE";
                        style: "itemStyle";
                        max: 1 1;
                    }
                }
            }
        }
    }
    group
    {
        name: "eyelight/pages";
        parts
        {
            part
            {
                name : "object.pages";
                type: TEXTBLOCK;

                scale: 1;
                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 0.0 0.0;
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                    text
                    {
                        text: "TITLE";
                        style: "itemStyle";
                        max: 1 1;
                    }
                }
            }
        }
    }
    group
    {
        name: "eyelight/title";
        parts
        {
            part
            {
                name : "title_background";
                type: IMAGE;

                description
                {
                    state: "default" 0.0;
                    color: 255 255 255 255;
                    rel1
                    {
                        relative: -0.1 -0.4;
                        to: "object.title";
                    }
                    rel2
                    {
                        relative: 1.1 1.1;
                        to: "object.title";
                    }
                    image.normal: "title_background.png";
                }
            }
            part
            {
                name : "object.title";
                type: TEXTBLOCK;

                scale: 1;
                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 0.0 0.0;
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                    text
                    {
                        text: "TITLE";
                        style: "titleStyle";
                        max: 1 1;
                    }
                }
            }
        }
    }
    group
    {
        name: "eyelight/subtitle";
        parts
        {
            part
            {
                name : "subtitle_background";
                type: IMAGE;

                description
                {
                    state: "default" 0.0;
                    color: 255 255 255 255;
                    rel1
                    {
                        relative: -0.1 -0.4;
                        to: "object.subtitle";
                    }
                    rel2
                    {
                        relative: 1.1 1.1;
                        to: "object.subtitle";
                    }
                    image.normal: "subtitle_background.png";
                }
            }
            part
            {
                name : "object.subtitle";
                type: TEXTBLOCK;

                scale: 1;
                description
                {
                    state: "default" 0.0;
                    rel1
                    {
                        relative: 0.0 0.0;
                    }
                    rel2
                    {
                        relative: 1.0 1.0;
                    }
                    text
                    {
                        text: "subtitle";
                        style: "subtitleStyle";
                        max: 1 1;
                    }
                }
            }
        }
    }

    #include "layout.edc"

    group
    {
        name: "eyelight/custom_area";
        script {
            //resize the area
            public message(Msg_Type:type, id, ...) {
                if( (type==MSG_FLOAT_SET) && (id==0) )
                {
                    new Float:rel1_x;
                    new Float:rel1_y;
                    new Float:rel2_x;
                    new Float:rel2_y;

                    custom_state(PART:"area", "default", 0.0);

                    rel1_x = getfarg(2);
                    rel1_y = getfarg(3);
                    rel2_x = getfarg(4);
                    rel2_y = getfarg(5);
                    set_state_val(PART:"area", STATE_REL1, rel1_x, rel1_y);
                    set_state_val(PART:"area", STATE_REL2, rel2_x, rel2_y);
                    set_state(PART:"area", "custom", 0.0);
                }
            }
        }
        parts
        {
            part {
                name: "main";
                repeat_events: 1;
                description {
                    state: "default" 0.0;
                }
            }
            part {
                name: "area";
                repeat_events: 1;
                description {
                    state: "default" 0.0;
                    rel1.to: "main";
                    rel2.to: "main";
                }
            }
            custom_area("custom",0.0,0.0,1.0,1.0,"vertical");
            part {
                name:"slide";
                type:RECT;
                repeat_events: 1;
                description {
                    state: "default" 0.0;
                    rel1.to: "area";
                    rel2.to: "area";
                    visible: 1;
                    color: 255 255 255 255;
                }
            }
        }
    }

    #include "expose.edc"
    #include "gotoslide.edc"
    #include "slideshow.edc"
    #include "tableofcontents.edc"
}

