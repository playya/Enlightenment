@top@
@start@
<p class="contenttitle">THIS PAGE IS BEING WRITTEN - NOT FINISHED!</p>
<p class="contenttitle">Enlightenment's Core Systems</p>
<br>

<p>
Enlightenment has grown to be much more than a window manager. It has many
systems that have grown on their own to support development of the next
version (0.17) and all the effort is going into solidifying these systems to
be more than solid to build on. This has lead to a lot of code being produced
that is useful far and beyond a window manager. The idea is to share as much
code as possible with other programs, and so a small army of shared libraries
has evolved for Enlightenment. This page attempts to cover some of these
(especially the more interesting ones) to give a good insight into why they
exist, what they do, how to use them, and where they are going.
</p><p>
We refer to these systems as the <a href=efl.html>EFL or Enlightenment
Foundation Libraries</a>, as they are the foundation of the project and the
currently contain all the hard work. The intent is to have libraries that are
extremely easy to use and learn, that optimize automatically for the programmer
where possible and save the programmer time and effort in the long run. We
believe we have achieved many of these goals and have some very unique
aspects that may be of great interest to developers outside of the project to
create some interesting or even amazing tools.
</p><p>
<img src=img/sys_evas.png width=318 height=100>
</p>
<img src=img/sys_evas_shot1.png width=240 height=320 class=sshot align=right alt="Evas performance test program" hspace=16 vspace=16>
<p>
Evas is a display canvas. This is different to the usual "immediate mode"
display system that most programmers are used to and exists at the Xlib, GDI
and even OpenGL levels when doing graphics programming. The difference is
that the programmer has to call routines to DRAW the screen or updated
display by drawing one operation at a time, such as draw line, paste image,
draw box, paste text. When the screen needs an update these operations are
done again by the code, normally from the bottom-most element in the draw to
the top (painters algorithm). This is "immediate mode" drawing. Evas is
different. It is structural by nature, so instead of drawing, you describe
the canvas contents (or scene) in terms of primitives (images, lines, boxes,
polygons, text strings etc.) and properties (colour, stacking, size, etc.).
The drawing itself is handled by the canvas, which acts as a state machine,
not actually doing any "hard work" until the canvas's render call is
executed, at which time it evaluates the previous and the current state and
appropriately updates the screen without the programmer having to know how
this is done.
</p>
<img src=img/sys_evas_shot2.png width=240 height=320 class=sshot align=left alt="Ecore Evas test program" hspace=16 vspace=16>
<p>
Evas is a very core part of the <a href=efl.html>EFL</a>. It is the rendering
and display management engine that sits under anything you see on a screen.
It does all the work of managing display objects, their state, state changes,
layering, rendering and scaling, image loading, text rendering, update
handling, optimising the display pipeline to avoid work and more. It does a
lot of the grunt work of display, and is portable beyond
<a href=http://www.x.org>X</a>. It even runs in the framebuffer directly
without needing <a href=http://www.x.org>X</a>, under
<a href=http://www.trolltech.com/products/qtopia/index.html>Trolltech's
Qtopia</a>, on <a href=http://www.directfb.org>DirectFB</a>, can
render into a memory buffer, and use <a href=http://www.opengl.org/>OpenGL</a>
to accelerate rendering. It is extremely flexible and very powerful, saving a
lot of time writing repetitive drawing routines that often end up not
performing optimally as to do so takes a lot of time, care and effort that
most programmers would not want to spend, because it distracts from the
important work of making their application.
</p><p>
<img src=img/sys_evas_keitai.png width=225 height=246 align=right alt="Evas on embedded" hspace=16 vspace=16>
</p><p>
But despite all of the things that Evas can do, it is not very large. It has
been kept small and lean to make it viable for use on NOT just heavy-weight
desktops, but also on limited resource devices such as PDA's, mobile phones
and Smart phones, Stereo systems, DVD Players, PVR/DVR Systems and more. It
has already been ported to Mobile phones and PDA's, PVR/DVR systems and has
proved itself capable of driving these displays very nicely with beautiful
effects. The developer does not have to change how they code for a device or
their desktop as the API and rendering are the same, so no special
development environments or emulators are needed. This saves time and effort,
allowing desktop and device code to be shared and maintained easily. Also
since Evas hides the details of the devices display format, and virtualises
the display at an object level, the programmer doesn't need to care how to
render things. They can use a standard system that is universal across all
instances of Evas.
</p><p>
Evas provides alpha blending, high quality scaling of images, anti-aliased
truetype text, gradients, lines, polygons and more. The list of supported
objects is growing, and can be extended via smart objects. It has an interface
mechanism to allow for video data to be efficiently handled (which is what
Emotion exploits) and more.
</p><p>
<img src=img/sys_ecore.png width=318 height=100>
</p><p>
Ecore is a modular group of very closely linked libraries that provide core
event loop functionality and related tasks. As the core event loop it
provides conversion of system signals into events, to avoid having to have
re-entrant code, handle basic file descriptor watching and passing off
control to appropriate callback routines where needed, handling timers, idle
calls, and other general program infrastructure and loop code.
</p><p>
It also provides easy to use wrappers around common systems such as X, Evas
(for setup and combining with X), the framebuffer, configuration management,
inter process communication, socket handling, client/server programming, text
encoding conversions (e.g. EUCJP to UTF8), deferred job handling and more. This
library is a big time saver and core infrastructure library that can be used
to do all the basic things applications need to do, with minimal code and
effort.
</p><p>
The best way to describe ecore is as the cement between the bricks. It holds
things together very nicely. In the later examples a lot of the setup and
infrastructure are thanks to ecore.
</p><p>
<img src=img/sys_edje.png width=318 height=100>
</p><p>
Edje is one of the more unique parts of EFL, combining many things that
<a href=http://www.macromedia.com>Shockwave/FLASH</a> can do with some things
it can't, but instead of being designed as a player, it is designed as a
slave library to be used by an application to enhance the applications
content and display via external compressed data files. It is being expanded
continuously, and thanks to its simple design is easy to improve. This is the
theme engine behind Enlightenment 0.17 and beyond and at last formalises
Enlightenment themes in a simple and consistent manner.
</p><p>
A Quick list of its features:
<ul>
<li>Scaleable bitmap images</li>
<li>Highly compressed inlined images</li>
<li>Lossless and lossy compression with or without alpha channel</li>
<li>Inlined compressed truetype fonts</li>
<li>Multiple inbuilt font effects</li>
<li>Automatic font sizing based on size or area</li>
<li>Text compression and ellipsis based cutting</li>
<li>Rectangle objects</li>
<li>Configurable color scheme system</li>
<li>Ability to embed Edje objects within Edje objects</li>
<li>Embryo scripting language for complex interactions</li>
<li>Sandboxed scripts so they cannot do much damage</li>
<li>Alpha blending</li>
<li>Completely scalable and resizable layout and interface metrics</li>
<li>Completely calculated tweened animation for ultra-smooth display</li>
</ul>
</p><p>
<img src=img/sys_embryo.png width=318 height=100>
</p><p>
</p><p>
<img src=img/sys_eet.png width=318 height=100>
</p><p>
</p><p>
<img src=img/sys_emotion.png width=318 height=100>
</p><p>
</p><p>
</p>

@end@
@bottom@
