<HTML
><HEAD
><TITLE
>The objects</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Evas Presentation, Part 4: mouse events processing and canvases"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Somes basis"
HREF="x32.html"><LINK
REL="NEXT"
TITLE="Next time"
HREF="x106.html"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Evas Presentation, Part 4: mouse events processing and canvases</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x32.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x106.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN78">3. The objects</H1
><P
>Once every parameter of a canvas is set, we can start putting object on it. The objects Evas can handle are images, texts,
rectangles, lines, color gradients or polygons. All these oobjects share the same type: <EM
>Evas_Object</EM
>. For instance, a
rectangle or a line can be created with these functions:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>Evas_Object evas_add_rectangle(Evas canvas);
Evas_Object evas_add_line(Evas canvas);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Though, all created objects do not have a properly defined position, size nor color. These attributes are to be affected after the
creation. One can set the size of an object by using the following function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_resize(Evas canvas, Evas_Object object,
                 double width, double height);</PRE
></FONT
></TD
></TR
></TABLE
><P
>And the size of an object can be set with this function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_move(Evas canvas, Evas_Object object,
               double x, double y);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Line objects are a little bit special, and instead of setting their size and position, we set directly the position of its ends
with this function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_set_line_xy(Evas canvas, Evas_Object object,
                      double x1, double y1, double x2, double y2);</PRE
></FONT
></TD
></TR
></TABLE
><P
>To set the color of an object (line, texte or rectangle), we use the following function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_set_color(Evas canvas, Evas_Object object,
                    int red, int green, int blue, int alpha);</PRE
></FONT
></TD
></TR
></TABLE
><P
>The <EM
>red</EM
>, <EM
>green</EM
> and <EM
>blue</EM
> parameters should be between 0 and 255 and set the color of the object. The
alpha parameter set the level of transluscency of the object; it also should be between 0 (totally transparent) and 255 (totally
opaque).</P
><P
>Just after creation, objects are hidden, even if placed on the canvas. To show them, we must use the following function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_show(Evas canvas, Evas_Object object);</PRE
></FONT
></TD
></TR
></TABLE
><P
>This object could then be hidden afterward, by using this function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_hide(Evas canvas, Evas_Object object);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Once the objects are on the canvas, we can ask Evas to render the whole thing with this function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_render(Evas canvas);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Let's see all these functions in a sample program:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>&#13;#include &#60;stdlib.h&#62;
#include &#60;unistd.h&#62;
#include &#60;math.h&#62;
#include "Evas.h"

int main(int argc, char *argv[])
{
  XSetWindowAttributes  att;
  Display              *display;
  Visual               *visual;
  Colormap              colormap;
  Window                window;
  Evas                  canvas;
  Evas_Object           object, line;
  int                   i;

  /* Canvas creation */
  canvas = evas_new();
  /* rendering method */
  evas_set_output_method(canvas, RENDER_METHOD_ALPHA_SOFTWARE);
  /* let's get three X-Window important variables */
  display = XOpenDisplay(NULL);
  visual = evas_get_optimal_visual(canvas, display);
  colormap = evas_get_optimal_colormap(canvas, display);

  /* Then, we create a suitable window */
  att.colormap = colormap;
  window = XCreateWindow(display,
                         RootWindow(display, DefaultScreen(display)),
                         0, 0, 500, 500, 0,
                         imlib_get_visual_depth(display, visual),
                         InputOutput, visual, CWColormap, &#38;att);
  XMapWindow(display, window);
  XSync(display, False);

  /* link the canvas to the window */
  evas_set_output(canvas, display, window, visual, colormap);

  /* The size of the canvas should be equals to the window's size */
  evas_set_output_size(canvas, 500, 500);

  /* Let's create some transluscent rectangles */
  for (i=25 ; i&#60;250 ; i+=50)
  {
    object = evas_add_rectangle(canvas);
    evas_show(canvas, object);
    evas_move(canvas, object, 250-i, i);
    evas_resize(canvas, object, i*2, (250-i)*2);
    evas_set_color(canvas, object, i, i, 255-i, 150);
  }
  
  /* a little animation, changing the canvas scale factor */
  for (i=500 ; i&#60;1000 ; i+=50)
  {
    evas_set_output_viewport(canvas, 0, 0, i, i);
    
    evas_render(canvas);
  }
  evas_set_output_viewport(canvas, 0, 0, 500, 500);
  evas_render(canvas);

  /* At last, we move a line around: */
  line = evas_add_line(canvas);
  evas_show(canvas, line);
  evas_set_color(canvas, line, 255,255,255,255);
  for (i=0 ; i&#60;360 ; i+=5)
  {
    evas_set_line_xy(canvas, line,
                     50+50*sin(i*2*M_PI/180.0),
                     50+50*cos(i*3*M_PI/180.0),
                     450+50*sin(i*4*M_PI/180.0),
                     450+50*cos(i*5*M_PI/180.0));
    evas_update_rect(canvas, 0, 0, 500, 500);
    evas_render(canvas);
  }
  return 0;
}</PRE
></FONT
></TD
></TR
></TABLE
><P
>To compile this sample program, you can use the following command-line:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>gcc evas_test.c -o evas_test -O2 -g -Wall `evas-config --cflags --libs`</PRE
></FONT
></TD
></TR
></TABLE
><P
>Try to adjust some parameters to make sure you have understood each of them.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x32.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x106.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Somes basis</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Next time</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>