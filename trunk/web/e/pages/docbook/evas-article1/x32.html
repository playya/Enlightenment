<HTML
><HEAD
><TITLE
>Somes basis</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Evas Presentation, Part 1: An Introduction to Evas"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Installation"
HREF="x19.html"><LINK
REL="NEXT"
TITLE="The objects"
HREF="x78.html"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Evas Presentation, Part 1: An Introduction to Evas</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x19.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x78.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN32">2. Somes basis</H1
><P
>Evas allow to draw lines, rectangles, texts, images or gradients, and all this with 256 levels of transparency. Also, every drawn
object can be resized or moved after its creation.</P
><P
>Each of these objects is put on a so-called <EM
>canvas</EM
> which must be created before any other operations. The type of an Evas canvas is simply <EM
>Evas</EM
>. The easiest way to create one is to use the following function:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>Evas evas_new(void);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Then, we have to choose which rendering method Evas will use to draw the objects on the canvas. This can be achieved with the
following function:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>void evas_set_output_method(Evas canvas, Evas_Render_Method method);</PRE
></FONT
></TD
></TR
></TABLE
><P
>The 'method' parameter should be one of these:</P
><P
></P
><UL
><LI
><P
><EM
>RENDER_METHOD_ALPHA_SOFTWARE</EM
>, Evas will use the Imlib2 library for all the drawing. This is a good compromise. This method will work well with every graphic card and the rendering will be very good.</P
></LI
><LI
><P
><EM
>RENDER_METHOD_BASIC_HARDWARE</EM
>, Evas will only use the Xlib (the native X-Window library) to draw the objects.
There will be only 2 levels of transparency (any pixel will be either totally opaque or totally transparent) instead of 256. This
rendering method is very fast, but give poor results. This method should only be used on slow hardware.</P
></LI
><LI
><P
><EM
>RENDER_METHOD_3D_HARDWARE</EM
>, Evas will use the accelerated facilities of your 3D graphic card. This is certainly the
fastest method if the graphic card does present an OpenGL acceleration, otherwise, it could be the slowest one! So use this method
only is you do own such a card.</P
></LI
><LI
><P
><EM
>RENDER_METHOD_IMAGE</EM
>, with this method, Evas will only be able to draw into an Imlib2 picture, without actually displaying the result on the screen. This assumption will let Evas to do some optimisations. Nevertheless, this methood isn't very used in a regular application.</P
></LI
></UL
><P
>After that, in order to show the whole thing, we must link the canvas to a Drawable (i.e. a Window or a Pixmap). This is done with
the following function:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>void evas_set_output(Evas canvas,
                     Display *display,
		     Drawable window,
		     Visual *visual,
		     Colormap colormap);</PRE
></FONT
></TD
></TR
></TABLE
><P
>The <EM
>canvas</EM
> parameter is obviously the canvas we want to link. <EM
>display</EM
> is an X-Window display, like the one
returned by <EM
>XOpenDisplay()</EM
>. <EM
>visual</EM
> and <EM
>colormap</EM
> should be a X-Window visual and a X-Window colormap
suitable for our canvas. The easiest way to get these two informations is to ask the following functions:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>Visual   *evas_get_optimal_visual(Evas canvas, Display *display);
Colormap  evas_get_optimal_colormap(Evas canvas, Display *display);</PRE
></FONT
></TD
></TR
></TABLE
><P
>And the <EM
>window</EM
> parameter of the <EM
>evas_set_output()</EM
> function should be a window or a pixmap (an off-screen window) to link the canvas to. This couuld be a window created with the <EM
>XCreateWindow()</EM
> function.</P
><P
>But relax, the sample code for this article will show how to do this without much problems. I've heard that someone is
developping a new library which let one use Evas within GTK windows, which should be very handy. I'll present this soon.</P
><P
>Before we could put objets on the canvas, we have to give it a size. It is often best to choose the same size as its linked
window, but it isn't the only option. This is done with the following function:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>void evas_set_output_size(Evas canvas, int width, int height);</PRE
></FONT
></TD
></TR
></TABLE
><P
>By default, the whole canvas is mapped to the whoole window. That is, a pixel from the canvas match exactly one pixel on the screen. There isn't such a limitation within Evas. So, the following function allow to choose which part of the canvas will be shown
in the window:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="PROGRAMLISTING"
>void evas_set_output_viewport(Evas canevas, double x, double y, double width, double height);</PRE
></FONT
></TD
></TR
></TABLE
><P
>The last four parameters define the rectangular part of the canvas which will be mapped to the window.
So, it is rather easy to make a zoom in/out effect by changing the <EM
>width</EM
> or <EM
>height</EM
> parameters or a scrolling
effect by changing the <EM
>x</EM
> or <EM
>y</EM
> parameters.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x19.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x78.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Installation</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>The objects</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>