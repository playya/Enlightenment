<HTML
><HEAD
><TITLE
>Properties specific to text objects</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Evas Presentation, Part 3: Object Properties"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Properties common to all objects"
HREF="x62.html"><LINK
REL="NEXT"
TITLE="Properties of polygon objects"
HREF="x101.html"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Evas Presentation, Part 3: Object Properties</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x62.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x101.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN78">4. Properties specific to text objects</H1
><P
>Text objects have quite a great number of properties that define them.
This is why there are many functions to query each of these properties.
To get the 'text' field of a text object, use this function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>char *evas_get_text_string(Evas canvas, Evas_Object object);</PRE
></FONT
></TD
></TR
></TABLE
><P
>The function returns NULL if the object is not a text object, or if the
'text' field is empty.</P
><P
>In the same way, this function returns the name of the font used by a text
object:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>char *evas_get_text_font(Evas canvas, Evas_Object object);</PRE
></FONT
></TD
></TR
></TABLE
><P
>This function returns the size of the font:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>int evas_get_text_size(Evas canvas, Evas_Object object);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Do not mistake it with the following functions that returns respectively the
width and height in pixels of the text object!</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>double evas_get_text_width(Evas canvas, Evas_Object object);
double evas_get_text_height(Evas canvas, Evas_Object object);</PRE
></FONT
></TD
></TR
></TABLE
><P
>It is also possible to get information on a particular character. The following
function returns a bounding rectangle that contains exactly one character:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_text_at(Evas canvas, Evas_Object object,
                  int index,
                  double *rect_x, double *rect_y,
                  double *rect_width, double *rect_height);</PRE
></FONT
></TD
></TR
></TABLE
><P
>The 'index' parameter indicates the position of the character in the 'object'
object's text string. The rectangle's geometry is returned in the last four
parameters. The upper left corner is at (*rect_x,*rect_y), and the width
and height are returned in the doubles rect_width and rect_height point to.</P
><P
>This function makes it easy for example to highlight a letter or a word:
just create a semi-transparent rectangle on top of the letter. We now see how
we could implement a function allowing the user to select some text with the mouse. 
Actually, this can be made even simpler by this function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>int evas_text_at_position(Evas canvas, Evas_Object object,
                          double x, double y,
                          double *rect_x, double *rect_y,
                          double *rect_width, double *rect_height);</PRE
></FONT
></TD
></TR
></TABLE
><P
>This function checks which character is displayed at (x,y) from the upper left
corner of the 'object' object. The return value is the index of the character
in the string, of -1 if there is no character at this position. Besides, the
bounding rectangle is returned in the last four arguments of the function,
in the same fashion as for evas_text_at();</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_text_get_ascent_descent(Evas canevas, Evas_Object objet,
                                  double *ascent, double *descent);</PRE
></FONT
></TD
></TR
></TABLE
><P
>To align characters horizontally, knowing their height is not enough. 
The useful information is the height above the baseline named 'ascent', and
the height under the baseline, named 'descent'. 
These numbers make it possible to align the baselines of two text objects.
To get them, use this function:</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_text_get_ascent_descent(Evas canvas, Evas_Object object,
                                  double *ascent, double *descent);</PRE
></FONT
></TD
></TR
></TABLE
><P
>This function returns the ascent and descent of the font used by the object,
as the font specifies it. However, there can be some special characters (as
illuminated capital letters) that are bigger. The following function returns the
same data as evas_text_get_ascent_descent(), but by checking
all the font's characters and returning the extremal values.</P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>void evas_text_get_max_ascent_descent(Evas canvas, Evas_Object object,
                                      double *ascent, double *descent);</PRE
></FONT
></TD
></TR
></TABLE
><P
>Ideally, both functions should return the same values. Fortunately this is
generally the case.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x62.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x101.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Properties common to all objects</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Properties of polygon objects</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>