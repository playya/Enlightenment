<html>
<head>
<title>Page 31</title>

<style type="text/css">
<!--
	.ft0{font-size:13px;font-family:Helvetica;color:#000000;}
	.ft1{font-size:22px;font-family:Helvetica;color:#000000;}
-->
</style>
</head>
<body vlink="blue" link="blue">
<div style="position:absolute;top:0;left:0"><img width="892" height="1263" src="index031.png"></div><div style="position:absolute;top:87;left:87"><nobr><span class="ft0">Evas Programmers Guide</span></nobr></div>
<div style="position:absolute;top:104;left:87"><nobr><span class="ft0">By Carsten Haitzler, Copyright © 2001 Carsten Haitzler (The Rasterman)</span></nobr></div>
<div style="position:absolute;top:126;left:139"><nobr><span class="ft0">updated canvas areas blended on top of the destination. This engine is useful for when you want to</span></nobr></div>
<div style="position:absolute;top:143;left:139"><nobr><span class="ft0">save the output of the canvas to a file - such as a JPEG, PNG, TIFF or other such format file using</span></nobr></div>
<div style="position:absolute;top:160;left:139"><nobr><span class="ft0">Imlib2's routines. It is also useful if you need to generate pixmaps and pixmap masks from canvas</span></nobr></div>
<div style="position:absolute;top:178;left:139"><nobr><span class="ft0">contents for some other reason.</span></nobr></div>
<div style="position:absolute;top:217;left:85"><nobr><span class="ft1"><b>E</b><b>v</b><b>e</b><b>n</b><b>t</b><b> </b><b>H</b><b>a</b><b>n</b><b>d</b><b>l</b><b>i</b><b>n</b><b>g</b><b> </b><b>w</b><b>i</b><b>t</b><b>h</b><b>i</b><b>n</b><b> </b><b>E</b><b>v</b><b>a</b><b>s</b></span></nobr></div>
<div style="position:absolute;top:266;left:139"><nobr><span class="ft0">Evas provides a convenient event and callback system that keeps it separated from the output</span></nobr></div>
<div style="position:absolute;top:283;left:139"><nobr><span class="ft0">device, allowing the program using Evas to control what events are received by the Evas canvas</span></nobr></div>
<div style="position:absolute;top:300;left:139"><nobr><span class="ft0">and thus how Evas will react to these events.</span></nobr></div>
<div style="position:absolute;top:339;left:139"><nobr><span class="ft0">The functions the program will have to use to pass events into the Evas canvas are</span></nobr></div>
<div style="position:absolute;top:356;left:139"><nobr><span class="ft0">evas_event_button_down(), evas_event_button_up(), evas_event_move(), evas_event_enter() and</span></nobr></div>
<div style="position:absolute;top:373;left:139"><nobr><span class="ft0">evas_event_leave(). These functions effectively input raw input device events into the canvas and</span></nobr></div>
<div style="position:absolute;top:390;left:139"><nobr><span class="ft0">let it process them. If you are passing events into a canvas at all (which you will need to do if you</span></nobr></div>
<div style="position:absolute;top:408;left:139"><nobr><span class="ft0">wish to use the callback system), you will need to use all of them, and not just a selection. IF you</span></nobr></div>
<div style="position:absolute;top:425;left:139"><nobr><span class="ft0">pass button down events in Evas expects button up events to come in at some stage, and if they</span></nobr></div>
<div style="position:absolute;top:442;left:139"><nobr><span class="ft0">don't, events won't be processed as expected.</span></nobr></div>
<div style="position:absolute;top:481;left:139"><nobr><span class="ft0">Evas supports a single pointer device with up to 32 buttons (numbered 1 to 32). The semantics of</span></nobr></div>
<div style="position:absolute;top:498;left:139"><nobr><span class="ft0">how events are processed is similar to that of X. When the first mouse button is pressed on an</span></nobr></div>
<div style="position:absolute;top:515;left:139"><nobr><span class="ft0">object, and no buttons are currently down, the pointer is logically &quot;grabbed&quot; to that object. This</span></nobr></div>
<div style="position:absolute;top:532;left:139"><nobr><span class="ft0">means no enter or leave events will be processed until either the button is ungrabbed with</span></nobr></div>
<div style="position:absolute;top:550;left:139"><nobr><span class="ft0">evas_pointer_ungrab(), or until all mouse buttons are raised and none are down. At this point if the</span></nobr></div>
<div style="position:absolute;top:567;left:139"><nobr><span class="ft0">pointer has left the object a leave event is generated, and any new enter events on other objects are</span></nobr></div>
<div style="position:absolute;top:584;left:139"><nobr><span class="ft0">also generated. All motion events whilst the pointer is logically grabbed to that object are reported as</span></nobr></div>
<div style="position:absolute;top:601;left:139"><nobr><span class="ft0">callbacks on that object, even if the motion happens outside the object. All callbacks for events are</span></nobr></div>
<div style="position:absolute;top:619;left:139"><nobr><span class="ft0">handled synchronously. That means every time an event is inputted into Evas with one of the above</span></nobr></div>
<div style="position:absolute;top:636;left:139"><nobr><span class="ft0">event calls, the call does not return until all callbacks triggered as a result of this input event have</span></nobr></div>
<div style="position:absolute;top:653;left:139"><nobr><span class="ft0">been called and have returned.</span></nobr></div>
<div style="position:absolute;top:692;left:139"><nobr><span class="ft0">The programmer can set callbacks on objects to be triggered by events. The functions</span></nobr></div>
<div style="position:absolute;top:709;left:139"><nobr><span class="ft0">evas_callback_add() and evas_callback_del() control these callbacks. When the callback is called</span></nobr></div>
<div style="position:absolute;top:726;left:139"><nobr><span class="ft0">the appropriate parameters to the callback are filed in. If you have a MOVE callback, the button</span></nobr></div>
<div style="position:absolute;top:743;left:139"><nobr><span class="ft0">parameter is unused, for example. The same applies with ENTER and LEAVE callbacks. The x and</span></nobr></div>
<div style="position:absolute;top:760;left:139"><nobr><span class="ft0">y parameters to the callback are filled in with the output pixel-space co-ordinates the pointer is</span></nobr></div>
<div style="position:absolute;top:778;left:139"><nobr><span class="ft0">currently at. The program can use evas_screen_x_to_world() and evas_screen_y_to_world() to</span></nobr></div>
<div style="position:absolute;top:795;left:139"><nobr><span class="ft0">translate the screen co-ordinates to world co-ordinates if it prefers to have the values in canvas unit</span></nobr></div>
<div style="position:absolute;top:812;left:139"><nobr><span class="ft0">space than output pixel space. The object and evas parameters are filled in with the evas an object</span></nobr></div>
<div style="position:absolute;top:830;left:139"><nobr><span class="ft0">handles of the object the event occured in and which Evas canvas that object is in.</span></nobr></div>
<div style="position:absolute;top:868;left:139"><nobr><span class="ft0">In addition to the callbacks for pointer events on objects there is an added callback for when an</span></nobr></div>
<div style="position:absolute;top:885;left:139"><nobr><span class="ft0">object is freed (destroyed). This allows the program to free the memory of any data pointers it may</span></nobr></div>
<div style="position:absolute;top:903;left:139"><nobr><span class="ft0">have attached to that object when it is destroyed.</span></nobr></div>
<div style="position:absolute;top:942;left:85"><nobr><span class="ft1"><b>L</b><b>i</b><b>s</b><b>t</b><b> </b><b>H</b><b>a</b><b>n</b><b>d</b><b>l</b><b>i</b><b>n</b><b>g</b></span></nobr></div>
<div style="position:absolute;top:991;left:139"><nobr><span class="ft0">Evas provides a convenient set of linked list handling functions. These functions all abstract a list</span></nobr></div>
<div style="position:absolute;top:1008;left:139"><nobr><span class="ft0">(which is an optimised doubly-linked list), to allow easy manipulation of the list and its members.</span></nobr></div>
<div style="position:absolute;top:1025;left:139"><nobr><span class="ft0">You may use these functions for anything you deem fit, and Evas provides these for its own internal</span></nobr></div>
<div style="position:absolute;top:1042;left:139"><nobr><span class="ft0">use as well as for the use of being able to return lists of data to the program calling the Evas</span></nobr></div>
<div style="position:absolute;top:1060;left:139"><nobr><span class="ft0">routines.</span></nobr></div>
<div style="position:absolute;top:1098;left:139"><nobr><span class="ft0">Some quick hints as to handling lists. To walk a list from beginning to end, a convenient way is to</span></nobr></div>
<div style="position:absolute;top:1115;left:139"><nobr><span class="ft0">use a for loop:</span></nobr></div>
<div style="position:absolute;top:1156;left:87"><nobr><span class="ft0">Evas Documentation</span></nobr></div>
<div style="position:absolute;top:1156;left:748"><nobr><span class="ft0">Page 31</span></nobr></div>
</body>
</html>
