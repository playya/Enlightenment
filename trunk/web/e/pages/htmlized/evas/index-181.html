<html>
<head>
<title>Page 181</title>

<style type="text/css">
<!--
	.ft0{font-size:13px;font-family:Helvetica;color:#000000;}
	.ft1{font-size:13px;font-family:Courier;color:#000000;}
-->
</style>
</head>
<body vlink="blue" link="blue">
<div style="position:absolute;top:0;left:0"><img width="892" height="1263" src="index181.png"></div><div style="position:absolute;top:87;left:87"><nobr><span class="ft0">Evas Programmers Guide</span></nobr></div>
<div style="position:absolute;top:104;left:87"><nobr><span class="ft0">By Carsten Haitzler, Copyright © 2001 Carsten Haitzler (The Rasterman)</span></nobr></div>
<div style="position:absolute;top:138;left:139"><nobr><span class="ft1">/* meat */</span></nobr></div>
<div style="position:absolute;top:152;left:139"><nobr><span class="ft1">void</span></nobr></div>
<div style="position:absolute;top:167;left:139"><nobr><span class="ft1">setup(void)</span></nobr></div>
<div style="position:absolute;top:181;left:139"><nobr><span class="ft1">{   Window win, ewin;</span></nobr></div>
<div style="position:absolute;top:210;left:139"><nobr><span class="ft1">   int i;</span></nobr></div>
<div style="position:absolute;top:224;left:139"><nobr><span class="ft1">   </span></nobr></div>
<div style="position:absolute;top:239;left:139"><nobr><span class="ft1">   /* setup callbacks for events */</span></nobr></div>
<div style="position:absolute;top:253;left:139"><nobr><span class="ft1">   e_event_filter_handler_add(EV_WINDOW_EXPOSE,</span></nobr></div>
<div style="position:absolute;top:268;left:139"><nobr><span class="ft1">e_window_expose);</span></nobr></div>
<div style="position:absolute;top:282;left:139"><nobr><span class="ft1">   e_event_filter_handler_add(EV_MOUSE_MOVE,               e_mouse_move);</span></nobr></div>
<div style="position:absolute;top:296;left:139"><nobr><span class="ft1">   e_event_filter_handler_add(EV_MOUSE_DOWN,               e_mouse_down);</span></nobr></div>
<div style="position:absolute;top:311;left:139"><nobr><span class="ft1">   e_event_filter_handler_add(EV_MOUSE_UP,                 e_mouse_up);</span></nobr></div>
<div style="position:absolute;top:325;left:139"><nobr><span class="ft1">   e_event_filter_handler_add(EV_WINDOW_CONFIGURE,</span></nobr></div>
<div style="position:absolute;top:340;left:139"><nobr><span class="ft1">e_window_configure);</span></nobr></div>
<div style="position:absolute;top:354;left:139"><nobr><span class="ft1">   /* handler for when the event queue goes idle */</span></nobr></div>
<div style="position:absolute;top:368;left:139"><nobr><span class="ft1">   e_event_filter_idle_handler_add(e_idle, NULL);</span></nobr></div>
<div style="position:absolute;top:383;left:139"><nobr><span class="ft1">   /* create a 400x300 toplevel window */</span></nobr></div>
<div style="position:absolute;top:397;left:139"><nobr><span class="ft1">   win = e_window_new(0, 0, 0, 400, 400);</span></nobr></div>
<div style="position:absolute;top:412;left:139"><nobr><span class="ft1">   e_window_set_events(win, XEV_CONFIGURE);</span></nobr></div>
<div style="position:absolute;top:426;left:139"><nobr><span class="ft1">   main_win = win;</span></nobr></div>
<div style="position:absolute;top:440;left:139"><nobr><span class="ft1">   </span></nobr></div>
<div style="position:absolute;top:455;left:139"><nobr><span class="ft1">   /* create a 400x300 evas rendering in software - conveience function</span></nobr></div>
<div style="position:absolute;top:469;left:139"><nobr><span class="ft1">that */</span></nobr></div>
<div style="position:absolute;top:484;left:139"><nobr><span class="ft1">   /* also creates the window for us in the right colormap &amp; visual */</span></nobr></div>
<div style="position:absolute;top:498;left:139"><nobr><span class="ft1">   evas = evas_new_all(e_display_get(), win, 0, 0, 400, 400,</span></nobr></div>
<div style="position:absolute;top:512;left:139"><nobr><span class="ft1">render_method,</span></nobr></div>
<div style="position:absolute;top:527;left:247"><nobr><span class="ft1">       max_colors, MAX_FONT_CACHE, MAX_IMAGE_CACHE,</span></nobr></div>
<div style="position:absolute;top:541;left:247"><nobr><span class="ft1">       FONT_DIRECTORY);</span></nobr></div>
<div style="position:absolute;top:556;left:139"><nobr><span class="ft1">   /* get the window ID for the evas created for us */</span></nobr></div>
<div style="position:absolute;top:570;left:139"><nobr><span class="ft1">   ewin = evas_get_window(evas);</span></nobr></div>
<div style="position:absolute;top:584;left:139"><nobr><span class="ft1">  </span></nobr></div>
<div style="position:absolute;top:599;left:139"><nobr><span class="ft1">   /* show the evas window */</span></nobr></div>
<div style="position:absolute;top:613;left:139"><nobr><span class="ft1">   e_window_show(ewin);</span></nobr></div>
<div style="position:absolute;top:628;left:139"><nobr><span class="ft1">   /* set the events this window accepts */</span></nobr></div>
<div style="position:absolute;top:642;left:139"><nobr><span class="ft1">   e_window_set_events(ewin, XEV_EXPOSE | XEV_BUTTON | XEV_MOUSE_MOVE);</span></nobr></div>
<div style="position:absolute;top:656;left:139"><nobr><span class="ft1">   /* show the toplevel */</span></nobr></div>
<div style="position:absolute;top:671;left:139"><nobr><span class="ft1">   e_window_show(win);</span></nobr></div>
<div style="position:absolute;top:685;left:139"><nobr><span class="ft1">   </span></nobr></div>
<div style="position:absolute;top:700;left:139"><nobr><span class="ft1">   /* now... create objects in the evas */</span></nobr></div>
<div style="position:absolute;top:714;left:139"><nobr><span class="ft1">   o_bg = evas_add_image_from_file(evas, &quot;background.png&quot;);   </span></nobr></div>
<div style="position:absolute;top:728;left:139"><nobr><span class="ft1">   evas_move(evas, o_bg, 0, 0);</span></nobr></div>
<div style="position:absolute;top:743;left:139"><nobr><span class="ft1">   evas_resize(evas, o_bg, 400, 400);</span></nobr></div>
<div style="position:absolute;top:772;left:139"><nobr><span class="ft1">   o_logo_sh = evas_add_image_from_file(evas, &quot;logo_shadow.png&quot;);</span></nobr></div>
<div style="position:absolute;top:786;left:139"><nobr><span class="ft1">   o_logo = evas_add_image_from_file(evas, &quot;logo.png&quot;);</span></nobr></div>
<div style="position:absolute;top:815;left:139"><nobr><span class="ft1">   o_b1_sh = evas_add_image_from_file(evas, &quot;bubble_shadow.png&quot;);</span></nobr></div>
<div style="position:absolute;top:829;left:139"><nobr><span class="ft1">   o_b2_sh = evas_add_image_from_file(evas, &quot;bubble_shadow.png&quot;);</span></nobr></div>
<div style="position:absolute;top:844;left:139"><nobr><span class="ft1">   o_b3_sh = evas_add_image_from_file(evas, &quot;bubble_shadow.png&quot;);</span></nobr></div>
<div style="position:absolute;top:872;left:139"><nobr><span class="ft1">   o_b1 = evas_add_image_from_file(evas, &quot;bubble.png&quot;);</span></nobr></div>
<div style="position:absolute;top:887;left:139"><nobr><span class="ft1">   o_b2 = evas_add_image_from_file(evas, &quot;bubble.png&quot;);</span></nobr></div>
<div style="position:absolute;top:901;left:139"><nobr><span class="ft1">   o_b3 = evas_add_image_from_file(evas, &quot;bubble.png&quot;);</span></nobr></div>
<div style="position:absolute;top:916;left:139"><nobr><span class="ft1">   </span></nobr></div>
<div style="position:absolute;top:930;left:139"><nobr><span class="ft1">   o_text = evas_add_text(evas, &quot;notepad&quot;, 20, &quot;. . .  the one you</span></nobr></div>
<div style="position:absolute;top:944;left:139"><nobr><span class="ft1">love.&quot;);</span></nobr></div>
<div style="position:absolute;top:959;left:139"><nobr><span class="ft1">   evas_set_color(evas, o_text, 0, 0, 0, 160);</span></nobr></div>
<div style="position:absolute;top:973;left:139"><nobr><span class="ft1">   </span></nobr></div>
<div style="position:absolute;top:988;left:139"><nobr><span class="ft1">     {int w, h;</span></nobr></div>
<div style="position:absolute;top:1031;left:193"><nobr><span class="ft1">evas_get_image_size(evas, o_logo, &amp;w, &amp;h);</span></nobr></div>
<div style="position:absolute;top:1045;left:193"><nobr><span class="ft1">evas_move(evas, o_logo, (400 - w) / 2, 400 - h - 16);</span></nobr></div>
<div style="position:absolute;top:1060;left:193"><nobr><span class="ft1">evas_move(evas, o_logo_sh, ((400 - w) / 2) + 16, 400 - h - 16 + 16);</span></nobr></div>
<div style="position:absolute;top:1074;left:193"><nobr><span class="ft1">w = evas_get_text_width(evas, o_text);</span></nobr></div>
<div style="position:absolute;top:1088;left:193"><nobr><span class="ft1">h = evas_get_text_height(evas, o_text);</span></nobr></div>
<div style="position:absolute;top:1103;left:193"><nobr><span class="ft1">evas_move(evas, o_text, (400 - w) / 2, 400 - h - 4);</span></nobr></div>
<div style="position:absolute;top:1117;left:139"><nobr><span class="ft1">     }</span></nobr></div>
<div style="position:absolute;top:1132;left:139"><nobr><span class="ft1">   </span></nobr></div>
<div style="position:absolute;top:1156;left:87"><nobr><span class="ft0">Evas Documentation</span></nobr></div>
<div style="position:absolute;top:1156;left:739"><nobr><span class="ft0">Page 181</span></nobr></div>
</body>
</html>
