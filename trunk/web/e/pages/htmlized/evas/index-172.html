<html>
<head>
<title>Page 172</title>

<style type="text/css">
<!--
	.ft0{font-size:13px;font-family:Helvetica;color:#000000;}
	.ft1{font-size:22px;font-family:Helvetica;color:#000000;}
	.ft2{font-size:13px;font-family:Courier;color:#000000;}
-->
</style>
</head>
<body vlink="blue" link="blue">
<div style="position:absolute;top:0;left:0"><img width="892" height="1263" src="index172.png"></div><div style="position:absolute;top:87;left:87"><nobr><span class="ft0">Evas Programmers Guide</span></nobr></div>
<div style="position:absolute;top:104;left:87"><nobr><span class="ft0">By Carsten Haitzler, Copyright © 2001 Carsten Haitzler (The Rasterman)</span></nobr></div>
<div style="position:absolute;top:126;left:85"><nobr><span class="ft1"><b>E</b><b>x</b><b>a</b><b>m</b><b>p</b><b>l</b><b>e</b><b> </b><b>4</b><b>:</b></span></nobr></div>
<div style="position:absolute;top:173;left:139"><nobr><span class="ft2">#include &lt;stdio.h&gt;</span></nobr></div>
<div style="position:absolute;top:188;left:139"><nobr><span class="ft2">#include &lt;stdlib.h&gt;</span></nobr></div>
<div style="position:absolute;top:202;left:139"><nobr><span class="ft2">#include &lt;math.h&gt;</span></nobr></div>
<div style="position:absolute;top:217;left:139"><nobr><span class="ft2">#include &lt;sys/time.h&gt;</span></nobr></div>
<div style="position:absolute;top:231;left:139"><nobr><span class="ft2">#include &lt;unistd.h&gt;</span></nobr></div>
<div style="position:absolute;top:245;left:139"><nobr><span class="ft2">#include &lt;Evas.h&gt;</span></nobr></div>
<div style="position:absolute;top:260;left:139"><nobr><span class="ft2">#include &lt;Ecore.h&gt;</span></nobr></div>
<div style="position:absolute;top:289;left:139"><nobr><span class="ft2">#define MAX_EVAS_COLORS (216)</span></nobr></div>
<div style="position:absolute;top:303;left:139"><nobr><span class="ft2">#define MAX_FONT_CACHE (512 * 1024)</span></nobr></div>
<div style="position:absolute;top:317;left:139"><nobr><span class="ft2">#define MAX_IMAGE_CACHE (1 * (1024 * 1024))</span></nobr></div>
<div style="position:absolute;top:332;left:139"><nobr><span class="ft2">#define FONT_DIRECTORY &quot;./&quot;</span></nobr></div>
<div style="position:absolute;top:346;left:139"><nobr><span class="ft2">#define RENDER_ENGINE RENDER_METHOD_ALPHA_SOFTWARE</span></nobr></div>
<div style="position:absolute;top:361;left:139"><nobr><span class="ft2">/* #define RENDER_ENGINE RENDER_METHOD_BASIC_HARDWARE */</span></nobr></div>
<div style="position:absolute;top:375;left:139"><nobr><span class="ft2">/* #define RENDER_ENGINE RENDER_METHOD_3D_HARDWARE */</span></nobr></div>
<div style="position:absolute;top:404;left:139"><nobr><span class="ft2">/* general functions */</span></nobr></div>
<div style="position:absolute;top:418;left:139"><nobr><span class="ft2">double get_time (void);</span></nobr></div>
<div style="position:absolute;top:433;left:139"><nobr><span class="ft2">void setup(void);</span></nobr></div>
<div style="position:absolute;top:461;left:139"><nobr><span class="ft2">/* callbacks for evas handling */</span></nobr></div>
<div style="position:absolute;top:476;left:139"><nobr><span class="ft2">/* timeout called every now and again for animation */</span></nobr></div>
<div style="position:absolute;top:490;left:139"><nobr><span class="ft2">static void e_timeout(int val, void *data);</span></nobr></div>
<div style="position:absolute;top:505;left:139"><nobr><span class="ft2">/* when the event queue goes idle call this */</span></nobr></div>
<div style="position:absolute;top:519;left:139"><nobr><span class="ft2">static void e_idle(void *data);</span></nobr></div>
<div style="position:absolute;top:533;left:139"><nobr><span class="ft2">/* when the window gets exposed call this */</span></nobr></div>
<div style="position:absolute;top:548;left:139"><nobr><span class="ft2">static void e_window_expose(Eevent * ev);</span></nobr></div>
<div style="position:absolute;top:577;left:139"><nobr><span class="ft2">/* globals */</span></nobr></div>
<div style="position:absolute;top:591;left:139"><nobr><span class="ft2">Evas_Object o_cube;</span></nobr></div>
<div style="position:absolute;top:605;left:139"><nobr><span class="ft2">Evas_Object o_bg;</span></nobr></div>
<div style="position:absolute;top:620;left:139"><nobr><span class="ft2">Evas evas;</span></nobr></div>
<div style="position:absolute;top:634;left:139"><nobr><span class="ft2">Evas_Render_Method render_method = RENDER_ENGINE;</span></nobr></div>
<div style="position:absolute;top:663;left:139"><nobr><span class="ft2">/* callbacks */</span></nobr></div>
<div style="position:absolute;top:677;left:139"><nobr><span class="ft2">static void</span></nobr></div>
<div style="position:absolute;top:692;left:139"><nobr><span class="ft2">e_timeout(int val, void *data)</span></nobr></div>
<div style="position:absolute;top:706;left:139"><nobr><span class="ft2">{   int i;</span></nobr></div>
<div style="position:absolute;top:735;left:139"><nobr><span class="ft2">   double v;</span></nobr></div>
<div style="position:absolute;top:749;left:139"><nobr><span class="ft2">   static double start = 0.0;</span></nobr></div>
<div style="position:absolute;top:764;left:139"><nobr><span class="ft2">   </span></nobr></div>
<div style="position:absolute;top:778;left:139"><nobr><span class="ft2">   if (start == 0.0) start = get_time();</span></nobr></div>
<div style="position:absolute;top:793;left:139"><nobr><span class="ft2">   v = (get_time() - start) / 10;</span></nobr></div>
<div style="position:absolute;top:807;left:139"><nobr><span class="ft2">   evas_set_color(evas, o_cube, </span></nobr></div>
<div style="position:absolute;top:821;left:247"><nobr><span class="ft2">  ((int)((sin(v    ) + 1.0) * 127.5)) &amp; 0xff,</span></nobr></div>
<div style="position:absolute;top:836;left:247"><nobr><span class="ft2">  ((int)((sin(v * 2) + 1.0) * 127.5)) &amp; 0xff,</span></nobr></div>
<div style="position:absolute;top:850;left:247"><nobr><span class="ft2">  ((int)((sin(v / 2) + 1.0) * 127.5)) &amp; 0xff,</span></nobr></div>
<div style="position:absolute;top:865;left:247"><nobr><span class="ft2">  ((int)((sin(v / 8) + 1.0) * 127.5)) &amp; 0xff);</span></nobr></div>
<div style="position:absolute;top:879;left:139"><nobr><span class="ft2">   e_add_event_timer(&quot;e_timeout()&quot;, 0.10, e_timeout, val + 1, NULL);</span></nobr></div>
<div style="position:absolute;top:893;left:139"><nobr><span class="ft2">}</span></nobr></div>
<div style="position:absolute;top:922;left:139"><nobr><span class="ft2">static void</span></nobr></div>
<div style="position:absolute;top:937;left:139"><nobr><span class="ft2">e_idle(void *data)</span></nobr></div>
<div style="position:absolute;top:951;left:139"><nobr><span class="ft2">{   evas_render(evas);</span></nobr></div>
<div style="position:absolute;top:980;left:139"><nobr><span class="ft2">}</span></nobr></div>
<div style="position:absolute;top:1009;left:139"><nobr><span class="ft2">static void </span></nobr></div>
<div style="position:absolute;top:1023;left:139"><nobr><span class="ft2">e_window_expose(Eevent * ev)</span></nobr></div>
<div style="position:absolute;top:1037;left:139"><nobr><span class="ft2">{   Ev_Window_Expose      *e;</span></nobr></div>
<div style="position:absolute;top:1066;left:139"><nobr><span class="ft2">   </span></nobr></div>
<div style="position:absolute;top:1081;left:139"><nobr><span class="ft2">   e = (Ev_Window_Expose *)ev-&gt;event;</span></nobr></div>
<div style="position:absolute;top:1095;left:139"><nobr><span class="ft2">   evas_update_rect(evas, e-&gt;x, e-&gt;y, e-&gt;w, e-&gt;h);</span></nobr></div>
<div style="position:absolute;top:1109;left:139"><nobr><span class="ft2">}</span></nobr></div>
<div style="position:absolute;top:1156;left:87"><nobr><span class="ft0">Evas Documentation</span></nobr></div>
<div style="position:absolute;top:1156;left:739"><nobr><span class="ft0">Page 172</span></nobr></div>
</body>
</html>
