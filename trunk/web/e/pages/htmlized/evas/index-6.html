<html>
<head>
<title>Page 6</title>

<style type="text/css">
<!--
	.ft0{font-size:13px;font-family:Helvetica;color:#000000;}
-->
</style>
</head>
<body vlink="blue" link="blue">
<div style="position:absolute;top:0;left:0"><img width="892" height="1263" src="index006.png"></div><div style="position:absolute;top:87;left:87"><nobr><span class="ft0">Evas Programmers Guide</span></nobr></div>
<div style="position:absolute;top:104;left:87"><nobr><span class="ft0">By Carsten Haitzler, Copyright © 2001 Carsten Haitzler (The Rasterman)</span></nobr></div>
<div style="position:absolute;top:472;left:139"><nobr><span class="ft0">You will notice 32 and 15 bit displays modes have &quot;Unused&quot; bits. The reason for this is speed. PC</span></nobr></div>
<div style="position:absolute;top:489;left:139"><nobr><span class="ft0">hardware is fastest at accessing data on 4 byte (DWORD) boundaries - this is why 32bit colour has</span></nobr></div>
<div style="position:absolute;top:507;left:139"><nobr><span class="ft0">an extra byte of padding to make access to the framebuffer fast for both graphics display hardware</span></nobr></div>
<div style="position:absolute;top:524;left:139"><nobr><span class="ft0">and the CPU. It uses extra memory space, but does speed things up. </span></nobr></div>
<div style="position:absolute;top:562;left:139"><nobr><span class="ft0">15 bit colour has 1 bit of extra padding to align the pixels to 2 byte (WORD) boundaries. This extra</span></nobr></div>
<div style="position:absolute;top:579;left:139"><nobr><span class="ft0">bit is thrown away - but it means you have the same number of bits for all colour channels, instead</span></nobr></div>
<div style="position:absolute;top:597;left:139"><nobr><span class="ft0">of the differing bits per channel that 16bit colour has. The quality for 16bit colour is slightly higher</span></nobr></div>
<div style="position:absolute;top:614;left:139"><nobr><span class="ft0">than 15bit (since it has double the number of colours), but it means &quot;pure&quot; gradient like grey for</span></nobr></div>
<div style="position:absolute;top:631;left:139"><nobr><span class="ft0">example, shows colouring since the red, green and blue values can NEVER be equal unless the</span></nobr></div>
<div style="position:absolute;top:649;left:139"><nobr><span class="ft0">colour is black or white. Shades in between get slightly coloured. Of course for real life images such</span></nobr></div>
<div style="position:absolute;top:666;left:139"><nobr><span class="ft0">as photos, and when dithering is used, this effect becomes unimportant and thus the extra gammut</span></nobr></div>
<div style="position:absolute;top:683;left:139"><nobr><span class="ft0">of colours becomes useful.</span></nobr></div>
<div style="position:absolute;top:722;left:139"><nobr><span class="ft0">8bit colour can be treated 2 ways. We can allocate a static colour map where we have 3 bits for red,</span></nobr></div>
<div style="position:absolute;top:739;left:139"><nobr><span class="ft0">3 for green and 2 for blue, but we cannot change the colours when using this to be a set other than</span></nobr></div>
<div style="position:absolute;top:756;left:139"><nobr><span class="ft0">this limited set of 256 colours. Being only 256 the quality degredation is quite noticeable. This is why</span></nobr></div>
<div style="position:absolute;top:773;left:139"><nobr><span class="ft0">there is another colour mode (which is much more commonly used), called pseudo colour. This is</span></nobr></div>
<div style="position:absolute;top:790;left:139"><nobr><span class="ft0">where applications can allocate a colour or a set of colours and so this set of 256 changes all the</span></nobr></div>
<div style="position:absolute;top:808;left:139"><nobr><span class="ft0">time and is dynamic, and the applications only allocate colours in this limited set of 256 that they</span></nobr></div>
<div style="position:absolute;top:825;left:139"><nobr><span class="ft0">actually need, thus conserving colours. If a colour cannot be allocated the closest match is given to</span></nobr></div>
<div style="position:absolute;top:842;left:139"><nobr><span class="ft0">the application and the application is told how close a match it is. It is the programmers job to deal</span></nobr></div>
<div style="position:absolute;top:859;left:139"><nobr><span class="ft0">with this.</span></nobr></div>
<div style="position:absolute;top:898;left:139"><nobr><span class="ft0">The problem with this is if it is not known ahead of time what colours are needed it can happen you</span></nobr></div>
<div style="position:absolute;top:915;left:139"><nobr><span class="ft0">allocate a lot of similar colours at the start because, lets say all your images are grey scale to start</span></nobr></div>
<div style="position:absolute;top:933;left:139"><nobr><span class="ft0">with, and then have all these greys and no colour entries left to allocate reds or blues for images that</span></nobr></div>
<div style="position:absolute;top:950;left:139"><nobr><span class="ft0">may be used later. Generally this is solved by pre-allocating a set of colours that spans the entire</span></nobr></div>
<div style="position:absolute;top:967;left:139"><nobr><span class="ft0">range of colours you could possibly want. This is often known as allocating a colour cube. Evas (or</span></nobr></div>
<div style="position:absolute;top:984;left:139"><nobr><span class="ft0">more correctly, Imlib2) uses this scheme of allocating colours.</span></nobr></div>
<div style="position:absolute;top:1023;left:139"><nobr><span class="ft0">Given that your display hardware, and thus X-Server, can be using any of these display modes (or</span></nobr></div>
<div style="position:absolute;top:1040;left:139"><nobr><span class="ft0">possibly other ones not even discussed here) it starts to look like a bit of work handling the rendering</span></nobr></div>
<div style="position:absolute;top:1057;left:139"><nobr><span class="ft0">and display of colour image data in X. Now let's discuss dithering. When you have a limited set of</span></nobr></div>
<div style="position:absolute;top:1074;left:139"><nobr><span class="ft0">colours, lets say 256, you may want to draw &quot;smooth&quot; shades - lets take for example a gradient</span></nobr></div>
<div style="position:absolute;top:1092;left:139"><nobr><span class="ft0">from black to white. Let's for now assume we use a 6x6x6 colour cube (that means 6 values for red,</span></nobr></div>
<div style="position:absolute;top:1109;left:139"><nobr><span class="ft0">green and blue) which total 216 colours, and is the same set applications such as Netscape try to</span></nobr></div>
<div style="position:absolute;top:1126;left:139"><nobr><span class="ft0">allocate for their display. At best we have 6 grey colours (including black and white) to use. This</span></nobr></div>
<div style="position:absolute;top:1156;left:87"><nobr><span class="ft0">Evas Documentation</span></nobr></div>
<div style="position:absolute;top:1156;left:756"><nobr><span class="ft0">Page 6</span></nobr></div>
<div style="position:absolute;top:136;left:267"><nobr><span class="ft0">Red</span></nobr></div>
<div style="position:absolute;top:136;left:452"><nobr><span class="ft0">Blue</span></nobr></div>
<div style="position:absolute;top:136;left:544"><nobr><span class="ft0">Unused</span></nobr></div>
<div style="position:absolute;top:136;left:360"><nobr><span class="ft0">Green</span></nobr></div>
<div style="position:absolute;top:136;left:636"><nobr><span class="ft0">Index</span></nobr></div>
<div style="position:absolute;top:225;left:244"><nobr><span class="ft0">32 bit Colour (RGBx)</span></nobr></div>
<div style="position:absolute;top:279;left:244"><nobr><span class="ft0">24 bit Colour (RGB)</span></nobr></div>
<div style="position:absolute;top:331;left:244"><nobr><span class="ft0">16 bit Colour (RGB565)</span></nobr></div>
<div style="position:absolute;top:331;left:461"><nobr><span class="ft0">15 bit Colour (RGB555)</span></nobr></div>
<div style="position:absolute;top:387;left:244"><nobr><span class="ft0">8 bit Colour (RGB332)</span></nobr></div>
<div style="position:absolute;top:387;left:458"><nobr><span class="ft0">8 Colour (Indexed)</span></nobr></div>
<div style="position:absolute;top:158;left:243"><nobr><span class="ft0">Some common pixel display modes found on PC-like hardware</span></nobr></div>
<div style="position:absolute;top:176;left:243"><nobr><span class="ft0">(Note: there are other display modes, but only some of the</span></nobr></div>
<div style="position:absolute;top:193;left:243"><nobr><span class="ft0">most common ones are listed here for brevity sake)</span></nobr></div>
</body>
</html>
