<html>
<head>
<title>Page 32</title>

<style type="text/css">
<!--
	.ft0{font-size:13px;font-family:Helvetica;color:#000000;}
	.ft1{font-size:13px;font-family:Courier;color:#000000;}
	.ft2{font-size:22px;font-family:Helvetica;color:#000000;}
	.ft3{font-size:13px;font-family:Helvetica;color:#000000;}
-->
</style>
</head>
<body vlink="blue" link="blue">
<div style="position:absolute;top:0;left:0"><img width="892" height="1263" src="index032.png"></div><div style="position:absolute;top:87;left:87"><nobr><span class="ft0">Evas Programmers Guide</span></nobr></div>
<div style="position:absolute;top:104;left:87"><nobr><span class="ft0">By Carsten Haitzler, Copyright © 2001 Carsten Haitzler (The Rasterman)</span></nobr></div>
<div style="position:absolute;top:124;left:139"><nobr><span class="ft1">Evas_List l, list;</span></nobr></div>
<div style="position:absolute;top:138;left:139"><nobr><span class="ft1">for (l = list; l; l = l-&gt;next)</span></nobr></div>
<div style="position:absolute;top:152;left:139"><nobr><span class="ft1">  {</span></nobr></div>
<div style="position:absolute;top:167;left:139"><nobr><span class="ft1">    void *element;</span></nobr></div>
<div style="position:absolute;top:181;left:139"><nobr><span class="ft1">    element = l-&gt;data;</span></nobr></div>
<div style="position:absolute;top:196;left:139"><nobr><span class="ft1">    /* ... process the element here ... */</span></nobr></div>
<div style="position:absolute;top:210;left:139"><nobr><span class="ft1">  }</span></nobr></div>
<div style="position:absolute;top:265;left:139"><nobr><span class="ft0">You should remember that removing or adding elements to a list whilst walking it is dangerous since</span></nobr></div>
<div style="position:absolute;top:282;left:139"><nobr><span class="ft0">it modifies the data you are currently inspecting, and thus will probably lead to bugs, infinite loops or</span></nobr></div>
<div style="position:absolute;top:300;left:139"><nobr><span class="ft0">strangely truncated lists.</span></nobr></div>
<div style="position:absolute;top:339;left:85"><nobr><span class="ft2"><b>C</b><b>a</b><b>v</b><b>e</b><b>a</b><b>t</b><b>s</b><b>,</b><b> </b><b>L</b><b>i</b><b>m</b><b>i</b><b>t</b><b>a</b><b>t</b><b>i</b><b>o</b><b>n</b><b>s</b><b> </b><b>e</b><b>t</b><b>c</b><b>.</b></span></nobr></div>
<div style="position:absolute;top:388;left:139"><nobr><span class="ft0">There are some &quot;Caveats&quot; to use Evas. It has some limitations that are there mainly due to them</span></nobr></div>
<div style="position:absolute;top:405;left:139"><nobr><span class="ft0">being impractical to work around, others being the result of a design decision for one reason or</span></nobr></div>
<div style="position:absolute;top:422;left:139"><nobr><span class="ft0">another, and some being there because a better way wasn't known of at the time.</span></nobr></div>
<div style="position:absolute;top:461;left:139"><nobr><span class="ft3"><b>S</b><b>i</b><b>z</b><b>e</b><b> </b><b>L</b><b>i</b><b>m</b><b>i</b><b>t</b><b>:</b></span></nobr></div>
<div style="position:absolute;top:500;left:139"><nobr><span class="ft0">Evas has an absolute maximum output size of 8192x8192 pixels for the output. Even this is</span></nobr></div>
<div style="position:absolute;top:517;left:139"><nobr><span class="ft0">impractical as to just have 1 buffer to render this in the first stage rendering for the software engine</span></nobr></div>
<div style="position:absolute;top:534;left:139"><nobr><span class="ft0">requires 256 Mb of RAM - that means 512 Mb of RAM would be needed (you will need another 256</span></nobr></div>
<div style="position:absolute;top:552;left:139"><nobr><span class="ft0">Mb RAM for the second stage buffer) just to render this Evas once. You should stick to &quot;sane&quot; sized</span></nobr></div>
<div style="position:absolute;top:569;left:139"><nobr><span class="ft0">canvases, and if you wish to pan around a large canvas, use the viewport to do this. You will also</span></nobr></div>
<div style="position:absolute;top:586;left:139"><nobr><span class="ft0">find that image objects have 8192x8192 size limitations for original and post-scaling output size.</span></nobr></div>
<div style="position:absolute;top:625;left:139"><nobr><span class="ft3"><b>P</b><b>e</b><b>r</b><b>f</b><b>o</b><b>r</b><b>m</b><b>a</b><b>n</b><b>c</b><b>e</b><b> </b><b>a</b><b>n</b><b>d</b><b> </b><b>D</b><b>e</b><b>m</b><b>a</b><b>n</b><b>d</b><b> </b><b>L</b><b>o</b><b>a</b><b>d</b><b>i</b><b>n</b><b>g</b><b>:</b></span></nobr></div>
<div style="position:absolute;top:664;left:139"><nobr><span class="ft0">Evas demand-loads image data as needed. It will not load image data off disk until it actually needs</span></nobr></div>
<div style="position:absolute;top:681;left:139"><nobr><span class="ft0">it. Thus if an image is never displayed, and then later becomes visible, only then will the image be</span></nobr></div>
<div style="position:absolute;top:698;left:139"><nobr><span class="ft0">loaded off disk. If the object becomes invisible again the image data will be put back into the cache</span></nobr></div>
<div style="position:absolute;top:715;left:139"><nobr><span class="ft0">pool. Evas has an image (and font), cache just for this purpose. Keeping the cache at a reasonable</span></nobr></div>
<div style="position:absolute;top:733;left:139"><nobr><span class="ft0">size will use UP TO that amount of memory (in bytes) for cached image data (and for the font</span></nobr></div>
<div style="position:absolute;top:750;left:139"><nobr><span class="ft0">cache, glyph image data), in case Evas needs the image data again soon. This makes performance</span></nobr></div>
<div style="position:absolute;top:767;left:139"><nobr><span class="ft0">excellent even for naive applications, but uses extra memory. Your program could, if it was smart,</span></nobr></div>
<div style="position:absolute;top:785;left:139"><nobr><span class="ft0">look at system resources and set the cache size accordingly as free memory becomes available or</span></nobr></div>
<div style="position:absolute;top:802;left:139"><nobr><span class="ft0">is used up. Setting the cache to 0 effectively causes the entire cache to be flushed and all tentatively</span></nobr></div>
<div style="position:absolute;top:819;left:139"><nobr><span class="ft0">held data to be freed, and then will mean Evas does not cache any more data until you set it to</span></nobr></div>
<div style="position:absolute;top:836;left:139"><nobr><span class="ft0">some value grater than 0. If you do not like this behaviour, set the cache to 0 at the start. Also note</span></nobr></div>
<div style="position:absolute;top:854;left:139"><nobr><span class="ft0">that this cache is shared between ALL Evas canvases in the application. Setting it to zero in any</span></nobr></div>
<div style="position:absolute;top:871;left:139"><nobr><span class="ft0">canvas sets it to zero for all canvases. Also all image data for objects, textures etc. is shared</span></nobr></div>
<div style="position:absolute;top:888;left:139"><nobr><span class="ft0">between canvases in the same application, so it is relatively inexpensive to create lots of canvases</span></nobr></div>
<div style="position:absolute;top:905;left:139"><nobr><span class="ft0">that have the same objects with the same image sources since the data is shared, which is the bulk</span></nobr></div>
<div style="position:absolute;top:922;left:139"><nobr><span class="ft0">of the resources used.</span></nobr></div>
<div style="position:absolute;top:961;left:139"><nobr><span class="ft3"><b>B</b><b>a</b><b>c</b><b>k</b><b>g</b><b>r</b><b>o</b><b>u</b><b>n</b><b>d</b><b>:</b></span></nobr></div>
<div style="position:absolute;top:1000;left:139"><nobr><span class="ft0">Evas has NO background. If you create objects and have nothing behind all your objects (such as a</span></nobr></div>
<div style="position:absolute;top:1018;left:139"><nobr><span class="ft0">tiled image object or a large opaque rectangle or polygon), your objects will be rendered on top of</span></nobr></div>
<div style="position:absolute;top:1035;left:139"><nobr><span class="ft0">undefined contents - likely random memory garble or old framebuffer contents. You need to create</span></nobr></div>
<div style="position:absolute;top:1052;left:139"><nobr><span class="ft0">some object (be that a rectangle, image or anything) that will fill the canvas in the areas you expect</span></nobr></div>
<div style="position:absolute;top:1069;left:139"><nobr><span class="ft0">transparency to exist in objects, otherwise you will see nasty trails and artefacts.</span></nobr></div>
<div style="position:absolute;top:1108;left:139"><nobr><span class="ft3"><b>S</b><b>i</b><b>l</b><b>e</b><b>n</b><b>t</b><b> </b><b>E</b><b>r</b><b>r</b><b>o</b><b>r</b><b>s</b><b>:</b></span></nobr></div>
<div style="position:absolute;top:1156;left:87"><nobr><span class="ft0">Evas Documentation</span></nobr></div>
<div style="position:absolute;top:1156;left:748"><nobr><span class="ft0">Page 32</span></nobr></div>
</body>
</html>
